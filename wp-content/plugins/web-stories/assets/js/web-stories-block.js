!function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,__webpack_require__),a.l=!0,a.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)__webpack_require__.d(r,a,function(t){return e[t]}.bind(null,a));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=32)}([function(e,t){e.exports=window.React},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.components},function(e,t,r){"use strict";(function(e){r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return d}));var a=r(15);function o(){e[a.a]=e[a.a]||[],e[a.a].push(arguments)}const{trackingAllowed:i,trackingId:n,trackingIdGA4:s,appVersion:l,userProperties:c}=e.webStoriesTrackingSettings||{},d={trackingAllowed:!1,trackingEnabled:!1,trackingId:"",trackingIdGA4:"",userProperties:{},trackingAllowed:i,trackingId:n,trackingIdGA4:s,appVersion:l,userProperties:c}}).call(this,r(23))},function(e,t,r){e.exports=r(33)()},function(e,t,r){"use strict";r.d(t,"i",(function(){return Q})),r.d(t,"l",(function(){return X})),r.d(t,"f",(function(){return K})),r.d(t,"c",(function(){return Y})),r.d(t,"d",(function(){return J})),r.d(t,"h",(function(){return Z})),r.d(t,"k",(function(){return ee})),r.d(t,"a",(function(){return te})),r.d(t,"j",(function(){return re})),r.d(t,"e",(function(){return ae})),r.d(t,"g",(function(){return oe})),r.d(t,"b",(function(){return BlockIcon}));var a=r(0),o=r.n(a),i=r(12);function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var s=a.createElement("circle",{r:3,transform:"matrix(1 0 0 -1 20 9)"}),l=a.createElement("circle",{r:3,transform:"matrix(1 0 0 -1 3 9)"}),c=a.createElement("circle",{r:7.1,transform:"matrix(1 0 0 -1 12 9)",stroke:"#fff",strokeWidth:2.2});function SvgCirclesCarouselView({title:e,titleId:t,...r}){return a.createElement("svg",n({viewBox:"0 0 23 18",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,s,l,c)}const d=a.memo(SvgCirclesCarouselView);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var b=a.createElement("circle",{cx:21,cy:12,r:11,fill:"#fff",stroke:"#347BB5",strokeWidth:2}),m=a.createElement("mask",{id:"circles-carousel-view-panel-icon_svg__a",fill:"#fff"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M34.803 17.88A14.952 14.952 0 0036 12c0-2.087-.426-4.075-1.197-5.88a6 6 0 110 11.761z"})),p=a.createElement("path",{d:"M34.803 17.88l-1.84-.784-.962 2.258 2.406.487.396-1.96zm0-11.76l-.396-1.96L32 4.645l.963 2.258 1.84-.785zM34 12c0 1.813-.37 3.534-1.036 5.096l3.679 1.57A16.952 16.952 0 0038 12h-4zm-1.036-5.096A12.952 12.952 0 0134 12h4c0-2.362-.483-4.616-1.357-6.665l-3.68 1.57zM35.2 8.08c.257-.052.524-.08.8-.08V4c-.544 0-1.077.055-1.593.16l.793 3.92zM36 8a4 4 0 014 4h4a8 8 0 00-8-8v4zm4 4a4 4 0 01-4 4v4a8 8 0 008-8h-4zm-4 4c-.276 0-.543-.028-.8-.08l-.793 3.92c.516.105 1.05.16 1.593.16v-4z",fill:"#347BB5",mask:"url(#circles-carousel-view-panel-icon_svg__a)"}),h=a.createElement("mask",{id:"circles-carousel-view-panel-icon_svg__b",fill:"#fff"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.197 6.12a6 6 0 100 11.761A14.952 14.952 0 016 12c0-2.087.426-4.075 1.197-5.88z"})),w=a.createElement("path",{d:"M7.197 6.12l1.84.784.962-2.258-2.406-.487-.396 1.96zm0 11.76l.396 1.96L10 19.355l-.963-2.258-1.84.785zM6 8c.276 0 .543.028.8.08l.793-3.92A8.028 8.028 0 006 4v4zm-4 4a4 4 0 014-4V4a8 8 0 00-8 8h4zm4 4a4 4 0 01-4-4h-4a8 8 0 008 8v-4zm.8-.08c-.257.052-.524.08-.8.08v4c.544 0 1.077-.055 1.593-.16L6.8 15.92zm2.236 1.176A12.952 12.952 0 018 12H4c0 2.362.483 4.616 1.357 6.665l3.68-1.57zM8 12c0-1.813.37-3.534 1.036-5.096l-3.679-1.57A16.952 16.952 0 004 12h4z",fill:"#347BB5",mask:"url(#circles-carousel-view-panel-icon_svg__b)"});function SvgCirclesCarouselViewPanelIcon({title:e,titleId:t,...r}){return a.createElement("svg",u({viewBox:"0 0 42 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,b,m,p,h,w)}const f=a.memo(SvgCirclesCarouselViewPanelIcon);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var _=a.createElement("rect",{x:1,y:1,width:29,height:40,rx:1,stroke:"currentColor",strokeWidth:2}),v=a.createElement("path",{fill:"currentColor",d:"M6 27h19v2H6zM6 31h4v2H6z"});function SvgLatestStoriesBlock({title:e,titleId:t,...r}){return a.createElement("svg",g({viewBox:"0 0 31 42",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,_,v)}const y=a.memo(SvgLatestStoriesBlock);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var S=a.createElement("circle",{cx:16,cy:16,r:15,stroke:"currentColor",strokeWidth:2}),O=a.createElement("path",{d:"M16 9.263V16m0 6.737V16m0 0H9.263M16 16h6.737",stroke:"currentColor",strokeWidth:2});function SvgSelectedStoriesBlock({title:e,titleId:t,...r}){return a.createElement("svg",E({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,S,O)}const k=a.memo(SvgSelectedStoriesBlock);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var C=a.createElement("path",{d:"M14 1H8a7 7 0 00-7 7v0a7 7 0 007 7h6M18 1h6a7 7 0 017 7v0a7 7 0 01-7 7h-6M9 8h13.5",stroke:"currentColor",strokeWidth:2});function SvgEmbedStoryBlock({title:e,titleId:t,...r}){return a.createElement("svg",j({viewBox:"0 0 32 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,C)}const x=a.memo(SvgEmbedStoryBlock);function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var L=a.createElement("path",{d:"M0 0h5v6H0zM0 8h5v6H0zM7 0h5v6H7zM7 8h5v6H7z"});function SvgGridView({title:e,titleId:t,...r}){return a.createElement("svg",T({viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,L)}const M=a.memo(SvgGridView);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var N=a.createElement("path",{d:"M0 0h12v3H0zM0 5h12v3H0zM0 10h12v3H0z"});function SvgListView({title:e,titleId:t,...r}){return a.createElement("svg",B({viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,N)}const A=a.memo(SvgListView);function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var P=a.createElement("path",{d:"M4 14h10V0H4zM16 12h2V2h-2zM0 12h2V2H0z"});function SvgBoxCarouselView({title:e,titleId:t,...r}){return a.createElement("svg",I({viewBox:"0 0 18 14",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,P)}const z=a.memo(SvgBoxCarouselView);function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var R=a.createElement("path",{stroke:"currentColor",strokeWidth:2,d:"M1 1h6.462v9.538H1zM1 15.615h6.462v9.538H1zM12.539 1h6.462v9.538h-6.462zM12.539 15.615h6.462v9.538h-6.462z"});function SvgGridViewPanelIcon({title:e,titleId:t,...r}){return a.createElement("svg",W({viewBox:"0 0 20 27",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,R)}const V=a.memo(SvgGridViewPanelIcon);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var F=a.createElement("path",{stroke:"currentColor",strokeWidth:2,d:"M1 1h20v4H1zM1 11h20v4H1zM1 21h20v4H1z"});function SvgListViewPanelIcon({title:e,titleId:t,...r}){return a.createElement("svg",D({viewBox:"0 0 22 26",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,F)}const $=a.memo(SvgListViewPanelIcon);function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var q=a.createElement("path",{stroke:"currentColor",strokeWidth:2,d:"M7 1h12v18H7z"}),U=a.createElement("path",{fill:"currentColor",d:"M24 2h2v16h-2zM0 2h2v16H0z"});function SvgBoxCarouselViewPanelIcon({title:e,titleId:t,...r}){return a.createElement("svg",H({viewBox:"0 0 26 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,q,U)}const G=a.memo(SvgBoxCarouselViewPanelIcon);const Q=o.a.createElement(y,{width:31,height:42}),X=o.a.createElement(k,{width:32,height:32}),K=o.a.createElement(x,{width:32,height:16}),Y=o.a.createElement(z,{width:18,height:14}),J=o.a.createElement(d,{className:"web-stories-block__toolbar-icon icon__circles-carousel",width:23,height:18}),Z=o.a.createElement(M,{width:12,height:14}),ee=o.a.createElement(A,{width:12,height:13}),te=o.a.createElement(G,{width:26,height:20}),re=o.a.createElement($,{width:22,height:26}),ae=o.a.createElement(f,{width:42,height:24}),oe=o.a.createElement(V,{width:20,height:27}),BlockIcon=()=>{const e=Object(i.useInstanceId)(BlockIcon);return o.a.createElement("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},o.a.createElement("circle",{cx:"32",cy:"32",r:"32",transform:"rotate(-180 32 32)",fill:`url(#gradient-${e})`}),o.a.createElement("g",{filter:`url(#filter-${e})`,fill:"#fff"},o.a.createElement("path",{d:"M41.6 19.2a3.2 3.2 0 013.2 3.2v19.2a3.2 3.2 0 01-3.2 3.2V19.2zm-24 0a3.2 3.2 0 013.2-3.2h14.4a3.2 3.2 0 013.2 3.2v25.6a3.2 3.2 0 01-3.2 3.2H20.8a3.2 3.2 0 01-3.2-3.2V19.2zM48 22.4a2.4 2.4 0 012.4 2.4v14.4a2.4 2.4 0 01-2.4 2.4V22.4z"})),o.a.createElement("defs",null,o.a.createElement("linearGradient",{id:`gradient-${e}`,x1:"13.255",y1:"6.599",x2:"35.289",y2:"62.791",gradientUnits:"userSpaceOnUse"},o.a.createElement("stop",{stopColor:"#79B3FF"}),o.a.createElement("stop",{offset:"1",stopColor:"#CBACFF"})),o.a.createElement("filter",{id:`filter-${e}`,x:"8.96",y:"10.24",width:"46.08",height:"46.08",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},o.a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),o.a.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),o.a.createElement("feOffset",{dy:"1.28"}),o.a.createElement("feGaussianBlur",{stdDeviation:"1.92"}),o.a.createElement("feColorMatrix",{values:"0 0 0 0 0.423529 0 0 0 0 0.490196 0 0 0 0 0.733333 0 0 0 0.3 0"}),o.a.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),o.a.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}))))}},function(e,t){e.exports=window.wp.blockEditor},function(e,t){e.exports=window.wp.apiFetch},function(e,t,r){"use strict";(function(e){var a=r(4);t.a=async function(t,r={}){return new Promise((o=>{const i=setTimeout((()=>{e.console.warn(`[Web Stories] Tracking event "${t}" took too long to fire.`),o()}),1e3);Object(a.b)("event",t,{...r,event_callback:()=>{clearTimeout(i),o()}})}))}}).call(this,r(23))},function(e,t){e.exports=window.wp.url},function(e,t){e.exports=window.wp.data},function(e,t){e.exports=window.wp.compose},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r(18),o=r(2);function i(e,t,r){const i=Object(o.useMemo)((()=>Object(a.debounce)(e,t,r)),[e,t,r]);return Object(o.useEffect)((()=>()=>i.cancel()),[i]),i}},function(e,t){e.exports=window.wp.date},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));const a="webStoriesTrackingDataLayer"},function(e,t){e.exports=window.wp.blocks},function(e,t,r){"use strict";r.d(t,"a",(function(){return h})),r.d(t,"b",(function(){return w}));var a=r(4),o=r(15);const i="data-web-stories-tracking";async function n(e=!0){if(document.querySelector(`script[${i}]`))return;try{await(t=`https://www.googletagmanager.com/gtag/js?id=${a.a.trackingId}&l=${o.a}`,new Promise(((e,r)=>{const a=document.createElement("script");a.setAttribute(i,""),a.async=!0,a.src=t,a.addEventListener("load",e),a.addEventListener("error",r),document.head.appendChild(a)})))}catch{return}var t;const r=a.a.appName,n="/"+a.a.appName.replace(/ /g,"-").toLowerCase();Object(a.b)("js",new Date),Object(a.b)("set",{custom_map:{dimension1:"analytics",dimension2:"adNetwork",dimension3:"search_order",dimension4:"search_orderby",dimension5:"file_size",dimension6:"file_type",dimension7:"status",dimension8:"siteLocale",dimension9:"userLocale",dimension10:"userRole",dimension11:"enabledExperiments",dimension12:"wpVersion",dimension13:"phpVersion",dimension14:"isMultisite",dimension15:"name",dimension16:"activePlugins"}}),Object(a.b)("set","user_properties",a.a.userProperties),Object(a.b)("config",a.a.trackingId,{anonymize_ip:!0,app_name:a.a.appName,app_version:a.a.appVersion,send_page_view:e,transport_type:"beacon",page_title:r,page_path:n,...a.a.userProperties}),Object(a.b)("config",a.a.trackingIdGA4,{app_name:a.a.appName,app_version:a.a.appVersion,send_page_view:e,transport_type:"beacon",page_title:r,page_path:n})}var s=async function(e){a.a.trackingAllowed&&!a.a.trackingEnabled&&(await n(e),a.a.trackingEnabled=!0)};var l=async function(){return await s(),Boolean(a.a.trackingEnabled)},c=r(9);var d=async function(e,t,r=!1){if(!await l())return Promise.resolve();const a={description:`${e}: ${t}`,fatal:r};return Object(c.a)("exception",a)};const u=["ResizeObserver loop limit exceeded"];function b(e){if(e.filename&&!e.filename.includes("web-stories"))return;if(u.includes(e.message))return;const t=`${e.message} (${e.lineno}:${e.colno})`;d("uncaught_error",t,!0)}function m(e){const t=e.reason||"Promise rejection";d("uncaught_promise",t)}var p=function(){window.addEventListener("error",b),window.addEventListener("unhandledrejection",m)};var h=async function(e,t=!0){a.a.appName=e,await s(t),p()};var w=async function(e,t={}){if(!await l())return Promise.resolve();let r={};const{search_type:o,duration:i,title_length:n,unread_count:s,...d}=t;return o?r={...d,event_label:o}:i?r={...d,value:i}:n?r={...d,value:n}:s&&(r={...d,value:s}),Object.values(r).length?(Object(c.a)(e,{...r,send_to:a.a.trackingId}),Object(c.a)(e,{...t,send_to:a.a.trackingIdGA4}),Promise.resolve()):Object(c.a)(e,t)}},function(e,t){e.exports=window.lodash},function(e,t,r){var a;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var i=typeof a;if("string"===i||"number"===i)e.push(a);else if(Array.isArray(a)){if(a.length){var n=o.apply(null,a);n&&e.push(n)}}else if("object"===i)if(a.toString===Object.prototype.toString)for(var s in a)r.call(a,s)&&a[s]&&e.push(s);else e.push(a.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(a=function(){return o}.apply(t,[]))||(e.exports=a)}()},function(e,t,r){"use strict";var a=r(0),o=r.n(a),i=(r(5),r(1)),n=r(3),s=r(7),l=r(2),c=r(8),d=r.n(c),u=r(10),b=r(11),m=r(21);const{config:{api:{stories:p}}}=window.webStoriesBlockSettings;t.a=function FetchSelectedStories({icon:e,label:t,selectedStoryIds:r=[],setSelectedStories:a,setIsFetching:c}){const{createErrorNotice:h}=Object(b.useDispatch)("core/notices");return Object(l.useEffect)((()=>{(async()=>{try{const e=await d()({path:Object(u.addQueryArgs)(p,{_embed:"author,wp:featuredmedia",context:"edit",include:r,orderby:r.length>0?"include":void 0})});e.length&&a(e)}catch(e){h(Object(i.sprintf)(
/* translators: %s: error message. */
Object(i.__)("Unable to load stories. %s","web-stories"),(null==e?void 0:e.message)||""),{type:"snackbar"})}finally{c(!1)}})()}),[]),o.a.createElement(n.Placeholder,{icon:o.a.createElement(s.BlockIcon,{icon:e,showColors:!0}),label:t,className:"wp-block-web-stories-embed",instructions:!1},o.a.createElement(m.a,null,Object(i.__)("Loading Stories…","web-stories")))}},function(e,t,r){"use strict";var a=r(0),o=r.n(a),i=(r(5),r(3));t.a=function LoaderContainer({children:e}){return o.a.createElement("div",{className:"web-stories-block__loader-container"},e,o.a.createElement(i.Spinner,null))}},function(e,t,r){"use strict";var a=r(0),o=r.n(a),i=(r(5),r(1)),n=r(3),s=r(2),l=r(8),c=r.n(l),d=r(11),u=r(10),b=r(21),m=r(13),p=r(14);var h=function ItemOverlay({isSelected:e,story:t,addSelectedStory:r,removeSelectedStory:a}){const l=Object(s.useCallback)((a=>{a.preventDefault(),e||r(t)}),[r,t,e]),c=Object(s.useCallback)((o=>{o.preventDefault(),e?a(t):r(t)}),[a,r,t,e]);return o.a.createElement("button",{type:"button",className:e?"web-stories-story-preview-card__overlay item-selected":"web-stories-story-preview-card__overlay",onClick:l},e&&o.a.createElement("div",{className:"item-selected-icon"},o.a.createElement(n.Icon,{className:"item-selected-icon-check",icon:"saved"}),o.a.createElement(n.Icon,{className:"item-selected-icon-minus",icon:"minus",onClick:c}),o.a.createElement(n.VisuallyHidden,null,Object(i.__)("Deselect","web-stories"))))};const w=()=>{};var f=function StoryPreview({story:e,isSelected:t,addSelectedStory:r=w,removeSelectedStory:a=w}){var n,l,c,d,u,b,m,f,g,_,v,y;const E=Object(p.__experimentalGetSettings)().formats.date,S=Object(p.dateI18n)(E,e.created),O=Object(s.useMemo)((()=>{if(!S)return null;switch(e.status){case"publish":return Object(i.sprintf)(
/* translators: %s: published date */
Object(i.__)("Published %s","web-stories"),S);case"future":return Object(i.sprintf)(
/* translators: %s: future publish date */
Object(i.__)("Scheduled %s","web-stories"),S);default:return Object(i.sprintf)(
/* translators: %s: last modified date */
Object(i.__)("Modified %s","web-stories"),S)}}),[e.status,S]);return o.a.createElement("div",{className:"web-stories-story-preview-card"},o.a.createElement("div",{className:"web-stories-story-preview-card__poster"},o.a.createElement(h,{isSelected:t,story:e,addSelectedStory:r,removeSelectedStory:a}),(null===(n=e._embedded)||void 0===n||null===(l=n["wp:featuredmedia"])||void 0===l||null===(c=l[0])||void 0===c?void 0:c.source_url)&&o.a.createElement("img",{src:null===(d=e._embedded)||void 0===d||null===(u=d["wp:featuredmedia"])||void 0===u||null===(b=u[0])||void 0===b?void 0:b.source_url,alt:"",width:640,height:853})),o.a.createElement("div",{className:"web-stories-story-preview-card__label"},o.a.createElement("div",{className:"web-stories-story-preview-card__title"},""===e.title.rendered?Object(i.__)("Untitled","web-stories"):e.title.rendered),(null===(m=e._embedded)||void 0===m||null===(f=m.author)||void 0===f||null===(g=f[0])||void 0===g?void 0:g.name)&&o.a.createElement("div",null,null===(_=e._embedded)||void 0===_||null===(v=_.author)||void 0===v||null===(y=v[0])||void 0===y?void 0:y.name),o.a.createElement("div",null,O)))};const g=[{label:Object(i.__)("Name","web-stories"),value:"name"},{label:Object(i.__)("Date Created","web-stories"),value:"date"},{label:Object(i.__)("Last Modified","web-stories"),value:"modified"},{label:Object(i.__)("Created By","web-stories"),value:"author"}];function AuthorSearch({label:e,options:t,onFilterValueChange:r,onChange:a,value:i}){return n.ComboboxControl?o.a.createElement(n.ComboboxControl,{label:e,options:t,onFilterValueChange:r,onChange:a,value:i,className:"web-stories-story-picker-filter__combobox"}):o.a.createElement(n.SelectControl,{label:e,options:t,onChange:a,value:i})}function KeywordSearch({label:e,options:t,onFilterValueChange:r,onChange:a,value:i}){return n.ComboboxControl?o.a.createElement(n.ComboboxControl,{label:e,options:t,onFilterValueChange:r,onChange:a,value:i,className:"web-stories-story-picker-filter__combobox"}):o.a.createElement(n.TextControl,{label:e,value:i,onChange:a})}var _=function SelectStories({stories:e=[],selectedStories:t=[],setSelectedStories:r,hasAllStories:a,isLoading:l,fetchStories:c,maxNumOfStories:u}){const[b,p]=Object(s.useState)([]),[h,w]=Object(s.useState)(""),[_,v]=Object(s.useState)(""),[y,E]=Object(s.useState)("desc"),[S,O]=Object(s.useState)("modified"),k=Object(s.useRef)(1),{authors:j}=Object(d.useSelect)((e=>{const t={search:_},{getAuthors:r}=e("core");return{authors:r(t)}}),[_]),C=Object(s.useCallback)((()=>{c({author:(null==b?void 0:b.id)||void 0,search:h||void 0,order:y,orderBy:S,page:k.current})}),[h,b,c,y,S]);Object(s.useEffect)((()=>{k.current=1,C()}),[h,b,y,S,C]);const x=Object(s.useCallback)((()=>{k.current++,C()}),[C]),T=Object(m.a)((e=>{w(e)}),300),L=Object(m.a)((e=>{v(e),p(""===e?null:j.find((t=>t.id===Number(e))))}),300),M=Object(s.useCallback)((e=>{p(""===e?null:j.find((t=>t.id===Number(e))))}),[j,p]),B=Object(s.useCallback)((e=>{O(e),E(["title","author"].includes(e)?"asc":"desc")}),[E,O]),N=Object(s.useMemo)((()=>j.filter((({name:e})=>Boolean(null==e?void 0:e.trim().length))).map((({id:e,name:t})=>({label:t,value:e})))),[j]),A=Object(s.useMemo)((()=>e.filter((({title:e})=>{var t,r;return Boolean(null==e||null===(t=e.rendered)||void 0===t||null===(r=t.trim())||void 0===r?void 0:r.length)})).map((({id:e,title:t})=>({label:t.rendered,value:e})))),[e]),I=Object(s.useMemo)((()=>t.map((e=>e.id))),[t]),P=Object(s.useCallback)((e=>{I.includes(e.id)||(1!==u?t.length>=u||r([...t,e]):r([e]))}),[r,t,I,u]),z=Object(s.useCallback)((e=>{r(t.filter((t=>t.id!==e.id)))}),[t,r]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"web-stories-story-picker-filter"},o.a.createElement("div",{className:"web-stories-story-picker-filter__search-container"},o.a.createElement("div",{className:"web-stories-story-picker-filter__search-inner"},o.a.createElement(KeywordSearch,{label:Object(i.__)("Search Stories","web-stories"),options:A,onFilterValueChange:T,onChange:T,value:h})),o.a.createElement(AuthorSearch,{label:Object(i.__)("Search by Author","web-stories"),options:N,onFilterValueChange:L,onChange:M,value:null==b?void 0:b.id}),o.a.createElement("div",null,o.a.createElement(n.SelectControl,{label:Object(i.__)("Sort","web-stories"),options:g,value:S,onChange:B})))),!e.length&&h&&o.a.createElement("p",null,Object(i.sprintf)(
/* translators: %s: search term. */
Object(i.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),h)),!e.length&&!h&&o.a.createElement("p",null,Object(i.__)("Sorry, we couldn't find any results","web-stories")),e.length>=1&&o.a.createElement("div",{role:"list","aria-label":Object(i.__)("Viewing Stories","web-stories"),className:"web-stories-story-picker-filter__grid"},e.map((e=>{const t=I.includes(e.id);return o.a.createElement("div",{key:e.id,role:"listitem",className:"web-stories-story-picker-filter__grid_item"},o.a.createElement(f,{story:e,isSelected:t,addSelectedStory:P,removeSelectedStory:z}))}))),o.a.createElement("div",{className:"web-stories-story-picker-filter__load_more"},l&&o.a.createElement(n.Spinner,null),!a&&e.length>0&&!l&&o.a.createElement(n.Button,{variant:"primary",className:"is-primary",onClick:x},Object(i.__)("Load More","web-stories"))))},v=r(18);var y=function SortStories({selectedStories:e,setSelectedStories:t}){const[r,a]=Object(s.useState)(),[l,c]=Object(s.useState)(),d=Object(s.useCallback)(((r,a)=>{const o=e.map((e=>e.id));o.splice(a,0,o.splice(r,1).pop()),t(o.map((t=>e.find((e=>e.id===t)))))}),[e,t]),u=function(e,t,r){const a=Object(s.useMemo)((()=>Object(v.throttle)(e,t,r)),[e,t,r]);return Object(s.useEffect)((()=>()=>a.cancel()),[a]),a}(((e,t)=>{e.preventDefault(),t.classList.add("web-stories-story-picker-show-drag-inserter");const r=t.getBoundingClientRect();Math.abs(e.clientX-r.x)>Math.abs(e.clientX-(r.x+r.width))?t.classList.add("web-stories-story-picker-show-drag-inserter-right"):t.classList.remove("web-stories-story-picker-show-drag-inserter-right");const o=Number(t.children[0].dataset.order);a(o)}));return o.a.createElement("div",{role:"list","aria-label":Object(i.__)("Sorting Stories","web-stories"),className:"web-stories-story-picker-filter__grid"},e.map(((t,a)=>o.a.createElement("div",{key:t.id,onDragOver:e=>{u(e,e.currentTarget)},onDragLeave:e=>{e.preventDefault(),u.cancel();e.target.closest(".droppable").classList.remove("web-stories-story-picker-show-drag-inserter","web-stories-story-picker-show-drag-inserter-right")},onDrop:t=>{if(t.preventDefault(),t.stopPropagation(),u.cancel(),l){const t=e.findIndex((e=>e.id===l));d(t,r)}t.target.closest(".droppable").classList.remove("web-stories-story-picker-show-drag-inserter","web-stories-story-picker-show-drag-inserter-right")},className:"droppable"},o.a.createElement("div",{"data-order":a,id:`draggable-story-${t.id}`},o.a.createElement(n.Draggable,{elementId:`draggable-story-${t.id}`},(({onDraggableStart:e,onDraggableEnd:r})=>o.a.createElement("div",{key:t.id,role:"listitem",className:"web-stories-story-picker-filter__grid_item",onDragStart:r=>{c(t.id),e(r)},onDragEnd:e=>{r(e)},"data-order":a,draggable:!0},o.a.createElement(f,{story:t})))))))))};const{config:{api:{stories:E}}}=window.webStoriesBlockSettings;t.a=function StoryPicker({selectedStories:e,setSelectedStories:t,closeStoryPicker:r,isSortingStories:a=!1,setIsSortingStories:l=(()=>{}),maxNumOfStories:m}){const{createErrorNotice:p}=Object(d.useDispatch)("core/notices"),[h,w]=Object(s.useState)(e),[f,g]=Object(s.useState)(!0),[v,S]=Object(s.useState)("idle"),[O,k]=Object(s.useState)([]),[j,C]=Object(s.useState)([]),x=Object(s.useCallback)((()=>{r(),t(h)}),[r,t,h]),T=Object(s.useCallback)((async({orderby:e="modified",order:t="desc",search:r,author:a,page:o=1}={})=>{const n={_embed:"author,wp:featuredmedia",context:"edit",_web_stories_envelope:!0,search:r,author:a,page:o,per_page:10,orderby:e,order:t,status:"publish"};try{var s;S("loading");const e=await c()({path:Object(u.addQueryArgs)(E,n)}),t=Number(null==e||null===(s=e.headers)||void 0===s?void 0:s["X-WP-TotalPages"]);C(o===t),k((t=>1===o?e.body:[...t,...e.body]))}catch(e){S("error"),p(Object(i.__)("Unable to load stories","web-stories"),{type:"snackbar"})}finally{S("idle"),g(!1)}}),[p]);Object(s.useEffect)((()=>{f&&T()}),[f,T]);const L=1===m?Object(i.__)("Selected Story","web-stories"):Object(i.__)("Selected Stories","web-stories");return o.a.createElement(n.Modal,{title:L,onRequestClose:r,shouldCloseOnClickOutside:!1,className:"web-stories-story-picker-modal"},o.a.createElement("div",{className:"web-stories-story-picker-modal__content"},f?o.a.createElement(b.a,null,Object(i.__)("Loading Stories…","web-stories")):a?o.a.createElement(y,{selectedStories:h,setSelectedStories:w}):o.a.createElement(_,{stories:O,selectedStories:h,setSelectedStories:w,hasAllStories:j,fetchStories:T,maxNumOfStories:m,isLoading:"loading"===v})),o.a.createElement("div",{className:"web-stories-story-picker-modal__footer"},o.a.createElement("div",{className:"web-stories-story-picker-modal__footer--left"},!a&&!f&&m>1&&o.a.createElement("p",null,Object(i.sprintf)(
/* translators: %1$d: Number of selected stories, %2$d: Maximum allowed stories */
Object(i._n)("%1$d of %2$d story selected","%1$d of %2$d stories selected",m,"web-stories"),h.length,m))),o.a.createElement("div",{className:"web-stories-story-picker-modal__footer--right"},m>1&&(a?o.a.createElement(n.Button,{onClick:()=>l(!1)},Object(i.__)("Select Stories","web-stories")):o.a.createElement(n.Button,{onClick:()=>l(!0),disabled:h.length<2},Object(i.__)("Rearrange Stories","web-stories"))),o.a.createElement(n.Button,{isPrimary:!0,disabled:!h.length,onClick:x},Object(i.__)("Update","web-stories")))))}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var a,o;void 0===(o="function"==typeof(a=function(){var e="undefined"!=typeof window?window:this,t=e.Glider=function(t,r){var a=this;if(t._glider)return t._glider;if(a.ele=t,a.ele.classList.add("glider"),a.ele._glider=a,a.opt=Object.assign({},{slidesToScroll:1,slidesToShow:1,resizeLock:!0,duration:.5,easing:function(e,t,r,a,o){return a*(t/=o)*t+r}},r),a.animate_id=a.page=a.slide=0,a.arrows={},a._opt=a.opt,a.opt.skipTrack)a.track=a.ele.children[0];else for(a.track=document.createElement("div"),a.ele.appendChild(a.track);1!==a.ele.children.length;)a.track.appendChild(a.ele.children[0]);a.track.classList.add("glider-track"),a.init(),a.resize=a.init.bind(a,!0),a.event(a.ele,"add",{scroll:a.updateControls.bind(a)}),a.event(e,"add",{resize:a.resize})},r=t.prototype;return r.init=function(e,t){var r=this,a=0,o=0;r.slides=r.track.children,[].forEach.call(r.slides,(function(e,t){e.classList.add("glider-slide"),e.setAttribute("data-gslide",t)})),r.containerWidth=r.ele.clientWidth;var i=r.settingsBreakpoint();if(t||(t=i),"auto"===r.opt.slidesToShow||void 0!==r.opt._autoSlide){var n=r.containerWidth/r.opt.itemWidth;r.opt._autoSlide=r.opt.slidesToShow=r.opt.exactWidth?n:Math.max(1,Math.floor(n))}"auto"===r.opt.slidesToScroll&&(r.opt.slidesToScroll=Math.floor(r.opt.slidesToShow)),r.itemWidth=r.opt.exactWidth?r.opt.itemWidth:r.containerWidth/r.opt.slidesToShow,[].forEach.call(r.slides,(function(e){e.style.height="auto",e.style.width=r.itemWidth+"px",a+=r.itemWidth,o=Math.max(e.offsetHeight,o)})),r.track.style.width=a+"px",r.trackWidth=a,r.isDrag=!1,r.preventClick=!1,r.opt.resizeLock&&r.scrollTo(r.slide*r.itemWidth,0),(i||t)&&(r.bindArrows(),r.buildDots(),r.bindDrag()),r.updateControls(),r.emit(e?"refresh":"loaded")},r.bindDrag=function(){var e=this;e.mouse=e.mouse||e.handleMouse.bind(e);var t=function(){e.mouseDown=void 0,e.ele.classList.remove("drag"),e.isDrag&&(e.preventClick=!0),e.isDrag=!1},r={mouseup:t,mouseleave:t,mousedown:function(t){t.preventDefault(),t.stopPropagation(),e.mouseDown=t.clientX,e.ele.classList.add("drag")},mousemove:e.mouse,click:function(t){e.preventClick&&(t.preventDefault(),t.stopPropagation()),e.preventClick=!1}};e.ele.classList.toggle("draggable",!0===e.opt.draggable),e.event(e.ele,"remove",r),e.opt.draggable&&e.event(e.ele,"add",r)},r.buildDots=function(){var e=this;if(e.opt.dots){if("string"==typeof e.opt.dots?e.dots=document.querySelector(e.opt.dots):e.dots=e.opt.dots,e.dots){e.dots.innerHTML="",e.dots.classList.add("glider-dots");for(var t=0;t<Math.ceil(e.slides.length/e.opt.slidesToShow);++t){var r=document.createElement("button");r.dataset.index=t,r.setAttribute("aria-label","Page "+(t+1)),r.setAttribute("role","tab"),r.className="glider-dot "+(t?"":"active"),e.event(r,"add",{click:e.scrollItem.bind(e,t,!0)}),e.dots.appendChild(r)}}}else e.dots&&(e.dots.innerHTML="")},r.bindArrows=function(){var e=this;e.opt.arrows?["prev","next"].forEach((function(t){var r=e.opt.arrows[t];r&&("string"==typeof r&&(r=document.querySelector(r)),r&&(r._func=r._func||e.scrollItem.bind(e,t),e.event(r,"remove",{click:r._func}),e.event(r,"add",{click:r._func}),e.arrows[t]=r))})):Object.keys(e.arrows).forEach((function(t){var r=e.arrows[t];e.event(r,"remove",{click:r._func})}))},r.updateControls=function(e){var t=this;e&&!t.opt.scrollPropagate&&e.stopPropagation();var r=t.containerWidth>=t.trackWidth;t.opt.rewind||(t.arrows.prev&&(t.arrows.prev.classList.toggle("disabled",t.ele.scrollLeft<=0||r),t.arrows.prev.classList.contains("disabled")?t.arrows.prev.setAttribute("aria-disabled",!0):t.arrows.prev.setAttribute("aria-disabled",!1)),t.arrows.next&&(t.arrows.next.classList.toggle("disabled",Math.ceil(t.ele.scrollLeft+t.containerWidth)>=Math.floor(t.trackWidth)||r),t.arrows.next.classList.contains("disabled")?t.arrows.next.setAttribute("aria-disabled",!0):t.arrows.next.setAttribute("aria-disabled",!1))),t.slide=Math.round(t.ele.scrollLeft/t.itemWidth),t.page=Math.round(t.ele.scrollLeft/t.containerWidth);var a=t.slide+Math.floor(Math.floor(t.opt.slidesToShow)/2),o=Math.floor(t.opt.slidesToShow)%2?0:a+1;1===Math.floor(t.opt.slidesToShow)&&(o=0),t.ele.scrollLeft+t.containerWidth>=Math.floor(t.trackWidth)&&(t.page=t.dots?t.dots.children.length-1:0),[].forEach.call(t.slides,(function(e,r){var i=e.classList,n=i.contains("visible"),s=t.ele.scrollLeft,l=t.ele.scrollLeft+t.containerWidth,c=t.itemWidth*r,d=c+t.itemWidth;[].forEach.call(i,(function(e){/^left|right/.test(e)&&i.remove(e)})),i.toggle("active",t.slide===r),a===r||o&&o===r?i.add("center"):(i.remove("center"),i.add([r<a?"left":"right",Math.abs(r-(r<a?a:o||a))].join("-")));var u=Math.ceil(c)>=Math.floor(s)&&Math.floor(d)<=Math.ceil(l);i.toggle("visible",u),u!==n&&t.emit("slide-"+(u?"visible":"hidden"),{slide:r})})),t.dots&&[].forEach.call(t.dots.children,(function(e,r){e.classList.toggle("active",t.page===r)})),e&&t.opt.scrollLock&&(clearTimeout(t.scrollLock),t.scrollLock=setTimeout((function(){clearTimeout(t.scrollLock),Math.abs(t.ele.scrollLeft/t.itemWidth-t.slide)>.02&&(t.mouseDown||t.trackWidth>t.containerWidth+t.ele.scrollLeft&&t.scrollItem(t.getCurrentSlide()))}),t.opt.scrollLockDelay||250))},r.getCurrentSlide=function(){var e=this;return e.round(e.ele.scrollLeft/e.itemWidth)},r.scrollItem=function(e,t,r){r&&r.preventDefault();var a=this,o=e;if(++a.animate_id,!0===t)e*=a.containerWidth,e=Math.round(e/a.itemWidth)*a.itemWidth;else{if("string"==typeof e){var i="prev"===e;if(e=a.opt.slidesToScroll%1||a.opt.slidesToShow%1?a.getCurrentSlide():a.slide,i?e-=a.opt.slidesToScroll:e+=a.opt.slidesToScroll,a.opt.rewind){var n=a.ele.scrollLeft;e=i&&!n?a.slides.length:!i&&n+a.containerWidth>=Math.floor(a.trackWidth)?0:e}}e=Math.max(Math.min(e,a.slides.length),0),a.slide=e,e=a.itemWidth*e}return a.scrollTo(e,a.opt.duration*Math.abs(a.ele.scrollLeft-e),(function(){a.updateControls(),a.emit("animated",{value:o,type:"string"==typeof o?"arrow":t?"dot":"slide"})})),!1},r.settingsBreakpoint=function(){var t=this,r=t._opt.responsive;if(r){r.sort((function(e,t){return t.breakpoint-e.breakpoint}));for(var a=0;a<r.length;++a){var o=r[a];if(e.innerWidth>=o.breakpoint)return t.breakpoint!==o.breakpoint&&(t.opt=Object.assign({},t._opt,o.settings),t.breakpoint=o.breakpoint,!0)}}var i=0!==t.breakpoint;return t.opt=Object.assign({},t._opt),t.breakpoint=0,i},r.scrollTo=function(t,r,a){var o=this,i=(new Date).getTime(),n=o.animate_id,s=function(){var l=(new Date).getTime()-i;o.ele.scrollLeft=o.ele.scrollLeft+(t-o.ele.scrollLeft)*o.opt.easing(0,l,0,1,r),l<r&&n===o.animate_id?e.requestAnimationFrame(s):(o.ele.scrollLeft=t,a&&a.call(o))};e.requestAnimationFrame(s)},r.removeItem=function(e){var t=this;t.slides.length&&(t.track.removeChild(t.slides[e]),t.refresh(!0),t.emit("remove"))},r.addItem=function(e){var t=this;t.track.appendChild(e),t.refresh(!0),t.emit("add")},r.handleMouse=function(e){var t=this;t.mouseDown&&(t.isDrag=!0,t.ele.scrollLeft+=(t.mouseDown-e.clientX)*(t.opt.dragVelocity||3.3),t.mouseDown=e.clientX)},r.round=function(e){var t=1/(this.opt.slidesToScroll%1||1);return Math.round(e*t)/t},r.refresh=function(e){this.init(!0,e)},r.setOption=function(e,t){var r=this;r.breakpoint&&!t?r._opt.responsive.forEach((function(t){t.breakpoint===r.breakpoint&&(t.settings=Object.assign({},t.settings,e))})):r._opt=Object.assign({},r._opt,e),r.breakpoint=0,r.settingsBreakpoint()},r.destroy=function(){var t=this,r=t.ele.cloneNode(!0),a=function(e){e.removeAttribute("style"),[].forEach.call(e.classList,(function(t){/^glider/.test(t)&&e.classList.remove(t)}))};r.children[0].outerHTML=r.children[0].innerHTML,a(r),[].forEach.call(r.getElementsByTagName("*"),a),t.ele.parentNode.replaceChild(r,t.ele),t.event(e,"remove",{resize:t.resize}),t.emit("destroy")},r.emit=function(t,r){var a=this,o=new e.CustomEvent("glider-"+t,{bubbles:!a.opt.eventPropagate,detail:r});a.ele.dispatchEvent(o)},r.event=function(e,t,r){var a=e[t+"EventListener"].bind(e);Object.keys(r).forEach((function(e){a(e,r[e])}))},t})?a.call(t,r,t,e):a)||(e.exports=o)},function(e,t){e.exports=window.wp.primitives},function(e,t,r){"use strict";var a=r(0),o=r.n(a),i=(r(5),r(3)),n=r(7),s=r(12),l=r(2),c=r(1);const d=["image"],EmbedControls=e=>{const{switchBackToURLInput:t,width:r,height:a,minWidth:u,maxWidth:b,minHeight:m,maxHeight:p,poster:h,title:w,setAttributes:f}=e,g=`web-stories-embed-block__poster-image-description-${Object(s.useInstanceId)(EmbedControls,"web-stories-embed")}`,_=Object(l.createRef)(),v=Object(l.useCallback)((e=>{f({poster:e.url})}),[f]),y=Object(l.useCallback)((()=>{f({poster:""}),_.current.focus()}),[f,_]),E=Boolean(h);return o.a.createElement(o.a.Fragment,null,o.a.createElement(n.BlockControls,null,o.a.createElement(i.ToolbarGroup,null,i.ToolbarButton?o.a.createElement(i.ToolbarButton,{onClick:t},Object(c.__)("Replace","web-stories")):o.a.createElement(i.Button,{className:"components-toolbar__control",title:Object(c.__)("Replace","web-stories"),onClick:t}))),o.a.createElement(n.InspectorControls,null,o.a.createElement(i.PanelBody,{title:Object(c.__)("Embed Settings","web-stories")},o.a.createElement(i.PanelRow,null,o.a.createElement(i.BaseControl,null,o.a.createElement(i.TextControl,{type:"text",className:"web-stories-embed-title-control",label:Object(c.__)("Title","web-stories"),value:w||"",onChange:e=>f({title:e})}))),o.a.createElement(n.MediaUploadCheck,null,o.a.createElement(i.PanelRow,null,o.a.createElement(i.BaseControl,null,o.a.createElement(i.BaseControl.VisualLabel,{className:"web-stories-embed-poster-label"},Object(c.__)("Poster image","web-stories")),E&&o.a.createElement("img",{src:h,alt:""}),o.a.createElement(n.MediaUpload,{title:Object(c.__)("Select poster image","web-stories"),onSelect:v,allowedTypes:d,render:({open:e})=>o.a.createElement(i.Button,{isPrimary:!0,onClick:e,ref:_,"aria-describedby":g},E?Object(c.__)("Replace","web-stories"):Object(c.__)("Select","web-stories"))}),o.a.createElement("p",{id:g,hidden:!0},E?Object(c.sprintf)(
/* translators: %s: poster image URL. */
Object(c.__)("The current poster image url is %s","web-stories"),h):Object(c.__)("There is no poster image currently selected","web-stories")),E&&o.a.createElement(i.Button,{onClick:y,isTertiary:!0},Object(c.__)("Remove","web-stories"))))),o.a.createElement(i.PanelRow,null,o.a.createElement(i.BaseControl,{className:"web-stories-embed-size-control"},o.a.createElement(i.BaseControl.VisualLabel,null,Object(c.__)("Story dimensions","web-stories")),o.a.createElement("div",{className:"web-stories-embed-size-control__row"},o.a.createElement(i.TextControl,{type:"number",className:"web-stories-embed-size-control__width",label:Object(c.__)("Width","web-stories"),value:r||"",min:u,max:b,onChange:e=>f({width:parseInt(e)})}),o.a.createElement(i.TextControl,{type:"number",className:"web-stories-embed-size-control__height",label:Object(c.__)("Height","web-stories"),value:a||"",min:m,max:p,onChange:e=>f({height:parseInt(e)})})))))))};t.a=EmbedControls},function(e,t,r){"use strict";var a=r(0),o=r.n(a),i=(r(5),r(2));var n=Object(i.forwardRef)((function StoryPlayer({url:e,title:t,poster:r,width:a,height:i},n){return o.a.createElement("amp-story-player",{ref:n,style:{width:a?`${a}px`:void 0,height:i?`${i}px`:void 0},"data-testid":"amp-story-player"},o.a.createElement("a",{href:e},r?o.a.createElement("img",{alt:t,src:r,width:a,height:i,"data-amp-story-player-poster-img":!0}):t))}));const s=Object(i.forwardRef)((function EmbedPreview({url:e,title:t,poster:r,isSelected:a,width:s,height:l},c){const[d,u]=Object(i.useState)(!1);Object(i.useEffect)((()=>{!a&&d&&u(!1)}),[a,d,u]);const b=Object(i.useCallback)((()=>u(!0)),[u]);return o.a.createElement("div",{className:"web-stories-embed-preview wp-block-embed__wrapper",style:{"--aspect-ratio":0!==s?l/s:1,"--width":`${s}px`,"--height":`${l}px`}},o.a.createElement(n,{url:e,title:t,poster:r,ref:c,onFocus:b}),!d&&o.a.createElement("div",{className:"web-stories-embed-preview-overlay","data-testid":"embed-preview-overlay",onMouseUp:b}))}));t.a=s},function(e,t,r){"use strict";(function(e){var a=r(0),o=r.n(a),i=(r(5),r(17)),n=r(2),s=r(8),l=r.n(s),c=r(3),d=r(12),u=r(29),b=r(11),m=r(1),p=r(6),h=r(20),w=r(26),f=r(30),g=r(31),_=r(27);r(35);t.a=Object(u.withViewportMatch)({_isResizable:"medium"})((function StoryEmbedEdit({attributes:t,setAttributes:r,className:a,isSelected:s,_isResizable:u}){const{url:v="",width:y=360,height:E=600,align:S="none",poster:O,title:k,stories:j=[]}=t,[C,x]=Object(n.useState)(!1),[T,L]=Object(n.useState)(v),[M,B]=Object(n.useState)(!1),[N,A]=Object(n.useState)(!1),[I,P]=Object(n.useState)({}),[z,W]=Object(n.useState)(!1),[R,V]=Object(n.useState)(j),[D,F]=Object(n.useState)([]),$=M,H=!T||!v||C||z,q=d.useViewportMatch?d.useViewportMatch("medium"):u,U=Object(n.useRef)();Object(n.useEffect)((()=>{t.stories.toString()!==R.toString()&&r({stories:R})}),[t.stories,r,R]),Object(n.useEffect)((()=>{R.length&&!D.length&&A(!0)}),[R,D,A]),Object(n.useEffect)((()=>{L(v),Object(i.b)("story_embedded")}),[v]),Object(n.useEffect)((()=>{Object(i.b)("story_poster_changed")}),[O]),Object(n.useEffect)((()=>{if(U.current&&e.AmpStoryPlayer){new e.AmpStoryPlayer(e,U.current).load()}}),[$,H,q]);const G=Object(n.useCallback)((async e=>{if(e)try{B(!0);const t=encodeURIComponent(new URL(e).toString()),a=await l()({path:`web-stories/v1/embed?url=${t}`});W(!("string"==typeof(null==a?void 0:a.title))),P(a),r({url:e})}catch(e){e instanceof TypeError||P(e),W(!0)}finally{B(!1)}}),[r]);Object(n.useEffect)((()=>{(null!=I&&I.title||null!=I&&I.poster)&&r({title:null==I?void 0:I.title,poster:null==I?void 0:I.poster})}),[v,r,null==I?void 0:I.title,null==I?void 0:I.poster]);const Q=Object(n.useCallback)((e=>{var t,a,o,i;F(e),V(e.map((e=>e.id)));const n=null==e?void 0:e[0],s=null==n?void 0:n.link,l={title:null==n||null===(t=n.title)||void 0===t?void 0:t.rendered,poster:null==n||null===(a=n._embedded)||void 0===a||null===(o=a["wp:featuredmedia"])||void 0===o||null===(i=o[0])||void 0===i?void 0:i.source_url};P(l),L(s),x(!1),W(!1),r({url:s})}),[F,r]),X=Object(n.useCallback)((e=>{F([]),V([]),x(!1),W(!1),L(e),e!==v&&G(e)}),[v,G]),K=Object(n.useCallback)((()=>{x(!0)}),[]),{isRTL:Y,maxWidth:J}=Object(b.useSelect)((e=>{const{getSettings:t}=e("core/block-editor"),r=t();return{isRTL:r.isRTL,maxWidth:r.maxWidth}}),[]),{toggleSelection:Z}=Object(b.useDispatch)("core/block-editor");if($)return o.a.createElement(f.a,null);const ee=Object(m.__)("Single Story","web-stories");if(H)return N?o.a.createElement(h.a,{icon:o.a.createElement(p.b,null),label:ee,selectedStoryIds:R,setSelectedStories:F,setIsFetching:A}):o.a.createElement(g.a,{icon:o.a.createElement(p.b,null),label:ee,value:T,onSubmit:X,cannotEmbed:z,errorMessage:null==I?void 0:I.message,selectedStories:D,setSelectedStories:Q});const te=y/E,re=y<E?20:20*te,ae=E<y?20:20/te;if(!q)return o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,{switchBackToURLInput:K,poster:O,title:k,setAttributes:r,width:y,height:E,minWidth:Math.ceil(re),maxWidth:Math.floor(J),minHeight:Math.floor(ae),maxHeight:Math.ceil(J/te)}),o.a.createElement("div",{className:`${a} web-stories-embed align${S}`},o.a.createElement(_.a,{url:v,title:k,poster:O,ref:U,isSelected:s,width:y,height:E})));const oe="center"===S||"none"===S||"right"===S&&Y||"left"===S&&!Y,ie="center"===S||"left"===S&&Y||"right"===S&&!Y;return o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,{switchBackToURLInput:K,poster:O,title:k,setAttributes:r,width:y,height:E,minWidth:Math.ceil(re),maxWidth:Math.floor(J),minHeight:Math.floor(ae),maxHeight:Math.ceil(J/te)}),o.a.createElement("div",{className:`${a} web-stories-embed align${S}`},o.a.createElement(c.ResizableBox,{className:s?"show-resize-handle":"hide-resize-handle",size:{width:y,height:E},minWidth:re,maxWidth:J,minHeight:ae,maxHeight:J/te,lockAspectRatio:!0,enable:{top:!1,right:oe,bottom:!0,left:ie},onResizeStart:()=>Z(!1),onResizeStop:(e,t,a,o)=>{Z(!0),r({width:parseInt(y+o.width),height:parseInt(E+o.height)})}},o.a.createElement(_.a,{url:v,title:k,poster:O,ref:U,isSelected:s,width:y,height:E}))))}))}).call(this,r(23))},function(e,t){e.exports=window.wp.viewport},function(e,t,r){"use strict";var a=r(0),o=r.n(a),i=r(3),n=r(1);t.a=()=>o.a.createElement("div",{className:"wp-block-web-stories-embed is-loading"},o.a.createElement(i.Spinner,null),o.a.createElement("p",null,Object(n.__)("Embedding…","web-stories")))},function(e,t,r){"use strict";var a=r(0),o=r.n(a),i=(r(5),r(2)),n=r(3),s=r(7),l=r(1),c=r(22),d=r(25);var u=Object(i.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},Object(i.createElement)(d.Path,{d:"M6.734 16.106l2.176-2.38-1.093-1.028-3.846 4.158 3.846 4.157 1.093-1.027-2.176-2.38h2.811c1.125 0 2.25.03 3.374 0 1.428-.001 3.362-.25 4.963-1.277 1.66-1.065 2.868-2.906 2.868-5.859 0-2.479-1.327-4.896-3.65-5.93-1.82-.813-3.044-.8-4.806-.788l-.567.002v1.5c.184 0 .368 0 .553-.002 1.82-.007 2.704-.014 4.21.657 1.854.827 2.76 2.657 2.76 4.561 0 2.472-.973 3.824-2.178 4.596-1.258.807-2.864 1.04-4.163 1.04h-.02c-1.115.03-2.229 0-3.344 0H6.734z"}));var b=({url:e,onChange:t,onSubmit:r,onClose:a})=>o.a.createElement(s.URLPopover,{onClose:a},o.a.createElement("form",{className:"block-editor-media-placeholder__url-input-form","data-testid":"embed-placeholder-form",onSubmit:r},o.a.createElement("input",{className:"block-editor-media-placeholder__url-input-field",type:"url","aria-label":Object(l.__)("Story URL","web-stories"),placeholder:Object(l.__)("Paste or type URL","web-stories"),onChange:t,value:e}),o.a.createElement(n.Button,{className:"block-editor-media-placeholder__url-input-submit-button",icon:u,label:Object(l.__)("Embed","web-stories"),type:"submit"})));const EmbedPlaceholder=({icon:e,label:t,value:r,onSubmit:a,cannotEmbed:d,errorMessage:u,selectedStories:m=[],setSelectedStories:p})=>{const[h,w]=Object(i.useState)(r),[f,g]=Object(i.useState)(!1),[_,v]=Object(i.useState)(!1),y=Object(i.useCallback)((()=>{v(!1)}),[]),E=()=>g(!1),S=m.length>0;return o.a.createElement(o.a.Fragment,null,o.a.createElement(n.Placeholder,{icon:o.a.createElement(s.BlockIcon,{icon:e,showColors:!0}),label:t,className:"wp-block-web-stories-embed",instructions:Object(l.__)("Select an existing story from your site, or add one with a URL.","web-stories")},o.a.createElement(o.a.Fragment,null,o.a.createElement(n.Button,{isPrimary:!0,onClick:()=>v(!0)},S?Object(l.__)("Replace Story","web-stories"):Object(l.__)("Select Story","web-stories")),o.a.createElement("div",{className:"block-editor-media-placeholder__url-input-container"},o.a.createElement(n.Button,{className:"block-editor-media-placeholder__button",onClick:()=>g(!0),isPressed:f,variant:"tertiary"},!S&&r?Object(l.__)("Replace URL","web-stories"):Object(l.__)("Insert from URL","web-stories")),f&&o.a.createElement(b,{url:h,onChange:e=>{w(e.target.value)},onSubmit:e=>{e.preventDefault(),E(),a(h)},onClose:E}))),d&&o.a.createElement("div",{className:"components-placeholder__error"},o.a.createElement("div",{className:"components-placeholder__instructions"},Object(l.__)("Sorry, this content could not be embedded.","web-stories"),u&&o.a.createElement(o.a.Fragment,null," ",Object(l.sprintf)(
/* translators: %s: error message. */
Object(l.__)("Reason: %s.","web-stories"),u))))),_&&o.a.createElement(c.a,{closeStoryPicker:y,maxNumOfStories:1,selectedStories:m,setSelectedStories:p}))};EmbedPlaceholder.defaultProps={cannotEmbed:!1};t.a=EmbedPlaceholder},function(e,t,r){r(48),e.exports=r(36)},function(e,t,r){"use strict";var a=r(34);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,i,n){if(n!==a){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return r.PropTypes=r,r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){},function(e,t,r){"use strict";r.r(t)},,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var a=r(17),o=r(16),i=r(0),n=r.n(i),s=r(1),l=r(6);r(5);var c=function({attributes:e}){const{url:t,title:r,poster:a,width:o,height:i,align:s="none"}=e;return t&&r?n.a.createElement("div",{className:`wp-block-web-stories-embed align${s}`},n.a.createElement("a",{href:t},a?n.a.createElement("img",{alt:r,src:a,width:o,height:i}):r)):null};const d={url:{type:"string"},title:{type:"string"},poster:{type:"string"},width:{type:"number",default:360},height:{type:"number",default:600},align:{type:"string",default:"none"}};var u=[{attributes:d,migrate:e=>({...e,blockType:"url",stories:[],viewType:"",numOfStories:5,numOfColumns:2,circleSize:96,orderby:"",order:"",archiveLinkLabel:"",authors:[],fieldState:{}}),save:c,isEligible:({url:e,blockType:t})=>Boolean(!t&&e&&e.trim().length)},{attributes:d,save:function({attributes:e}){const{url:t,title:r,poster:a,width:o,height:i,align:s="none"}=e;return t&&r?n.a.createElement("div",{className:`wp-block-web-stories-embed align${s}`},n.a.createElement("amp-story-player",{style:{width:o?`${o}px`:void 0,height:i?`${i}px`:void 0},"data-testid":"amp-story-player"},n.a.createElement("a",{href:t,style:{"--story-player-poster":a?`url('${a}')`:void 0}},r))):null}}],b=r(28),m=r(3),p=r(7),h=r(2);const w="latest-stories",f="selected-stories",g="url",_=[{id:w,label:Object(s.__)("Latest Stories","web-stories"),description:Object(s.__)("Embed latest web stories.","web-stories"),icon:l.i},{id:f,label:Object(s.__)("Selected Stories","web-stories"),description:Object(s.__)("Manually select web stories.","web-stories"),icon:l.l},{id:g,label:Object(s.__)("Single Story","web-stories"),description:Object(s.__)("Embed a single story.","web-stories"),icon:l.f}],v="grid",y="list",E="circles",S="carousel",O=[{id:S,label:Object(s.__)("Box Carousel","web-stories"),icon:l.c,panelIcon:l.a},{id:E,label:Object(s.__)("Circle Carousel","web-stories"),icon:l.d,panelIcon:l.e},{id:v,label:Object(s.__)("Grid","web-stories"),icon:l.h,panelIcon:l.g},{id:y,label:Object(s.__)("List","web-stories"),icon:l.k,panelIcon:l.j}];var k=function BlockTypeSwitcher({selectedBlockType:e,setAttributes:t}){const r=m.ToolbarGroup?m.ToolbarGroup:m.Toolbar;return n.a.createElement(r,null,m.ToolbarItem?n.a.createElement(m.ToolbarItem,null,(r=>n.a.createElement(m.DropdownMenu,{icon:"update",toggleProps:r,label:Object(s.__)("Change Type","web-stories"),controls:_.filter((t=>t.id!==e)).map((e=>({title:e.label,onClick:()=>t({blockType:e.id})})))}))):n.a.createElement(m.DropdownMenu,{icon:"update",label:Object(s.__)("Change Type","web-stories"),controls:_.filter((t=>t.id!==e)).map((e=>({title:e.label,onClick:()=>t({blockType:e.id})})))}))};var j=({blockType:e,viewType:t,setAttributes:r})=>{const a=m.ToolbarGroup?m.ToolbarGroup:m.Toolbar;return n.a.createElement(p.BlockControls,null,n.a.createElement(a,null,e&&g!==e&&n.a.createElement(h.Fragment,null,O.map((e=>m.ToolbarButton?n.a.createElement(m.ToolbarButton,{key:e.id,label:e.label,icon:e.icon,onClick:()=>{r({viewType:e.id})},isPressed:e.id===t}):n.a.createElement(m.Button,{key:e.id,label:e.label,icon:e.icon,onClick:()=>{r({viewType:e.id})},isPressed:e.id===t}))))),n.a.createElement(k,{selectedBlockType:e,setAttributes:r}))};var C=function BlockConfigurationPanel({instructions:e,icon:t,setAttributes:r,selectionOptions:a,selectionType:o}){const i=Object(s.__)("Web Stories","web-stories");return n.a.createElement(m.Placeholder,{icon:n.a.createElement(p.BlockIcon,{icon:t,showColors:!0}),label:i,instructions:e,className:"web-stories-block-configuration-panel"},n.a.createElement("ul",{className:"web-stories-block-configuration-panel__options",role:"list","aria-label":Object(s.__)("Block Types","web-stories")},a.map((e=>n.a.createElement("li",{key:e.id},n.a.createElement(m.Button,{variant:"secondary",isSecondary:!0,onClick:()=>{r({[o]:e.id})},icon:n.a.createElement(m.Icon,{icon:e.panelIcon||e.icon,title:e.label}),label:e.description||e.label}),n.a.createElement("span",{className:"web-stories-block-configuration-panel__label components-placeholder__instructions",role:"presentation"},e.label))))))},x=r(8),T=r.n(x),L=r(10),M=r(13);var B=({label:e,value:t,onChange:r,onInputChange:a,placeholder:o,options:i=[]})=>Array.isArray(i)&&n.a.createElement("div",{className:"components-base-control"},n.a.createElement(m.FormTokenField,{value:t,suggestions:i,onChange:r,onInputChange:a,maxSuggestions:100,label:e,placeholder:o}));var N=({authors:e,setAttributes:t})=>{const[r,a]=Object(h.useState)(!1),[o,i]=Object(h.useState)([]),[l,c]=Object(h.useState)([]);Object(h.useEffect)((()=>{!r&&null!=e&&e.length&&T()({path:Object(L.addQueryArgs)("/wp/v2/users",{per_page:100,include:e.join(",")})}).then((e=>{void 0!==e&&Array.isArray(e)&&i(e.map((({id:e,name:t})=>({id:e,value:t}))))})).catch((()=>{i([])})).finally((()=>a(!0)))}),[r,e]);const d=Object(M.a)((e=>{T()({path:Object(L.addQueryArgs)("/wp/v2/users",{per_page:100,search:e})}).then((e=>{void 0!==e&&Array.isArray(e)&&c(e.map((({id:e,name:t})=>({id:e,value:t}))))})).catch((()=>{c([])}))}),500);return n.a.createElement(B,{label:Object(s.__)("Authors","web-stories"),value:o.map((({value:e})=>e)),options:l.map((({value:e})=>e)),onChange:e=>{if(void 0===e||!Array.isArray(e))return;const r=e.map((e=>[...l,...o].find((({value:t})=>t===e)))).filter(Boolean);i(r),t({authors:r.map((({id:e})=>e))})},onInputChange:d})};const{config:{fieldStates:A,archiveURL:I}}=window.webStoriesBlockSettings;var P=e=>{const{attributes:{viewType:t,numOfStories:r,numOfColumns:a,order:o,orderby:i,archiveLinkLabel:l,authors:c,circleSize:d,imageAlignment:u,fieldState:b},setAttributes:w,showFilters:f=!0}=e,g=Object(h.useRef)(!0);Object(h.useEffect)((()=>{const e={};Object.entries(A[t]).map((([t,r])=>{const{show:a}=r;void 0===b[`show_${t}`]&&(e[`show_${t}`]=a)})),Object.keys(e).length&&w({fieldState:{...b,...e}})}),[]),Object(h.useEffect)((()=>{if(g.current)return void(g.current=!1);const e={};Object.entries(A[t]).map((([t,r])=>{const{show:a}=r;e[`show_${t}`]=a})),w({fieldState:e})}),[t]);const ArchiveLink=()=>I?n.a.createElement("a",{target:"__blank",href:I},Object(s.__)("View archive page","web-stories")):null;return n.a.createElement(p.InspectorControls,null,n.a.createElement(m.PanelBody,{className:"web-stories-settings",title:Object(s.__)("Layout Options","web-stories")},A[t]&&Object.entries(A[t]).map((([e,t])=>{const{label:r,hidden:a}=t;return!a&&"circle_size"!==e&&"image_alignment"!==e&&n.a.createElement(m.ToggleControl,{key:`${e}__control`,label:r,checked:b[`show_${e}`]||!1,onChange:()=>(e=>{w({fieldState:{...b,[`show_${e}`]:!b[`show_${e}`]}})})(e),help:"archive_link"===e&&b[`show_${e}`]&&n.a.createElement(ArchiveLink,null)})})),b.show_archive_link&&I&&n.a.createElement(m.TextControl,{label:Object(s.__)("Archive Link Label","web-stories"),value:l,placeholder:Object(s.__)("View All Stories","web-stories"),onChange:e=>w({archiveLinkLabel:e}),className:"web-stories-settings-archive-link"})),[E,v,y].includes(t)&&n.a.createElement(m.PanelBody,{className:"web-stories-settings",title:Object(s.__)("Layout and Style Options","web-stories")},y===t&&n.a.createElement(m.RadioControl,{label:Object(s.__)("Image Alignment","web-stories"),selected:u,options:[{value:"left",label:Object(s.__)("Left","web-stories")},{value:"right",label:Object(s.__)("Right","web-stories")}],onChange:e=>{w({imageAlignment:e})}}),v===t&&n.a.createElement(m.RangeControl,{label:Object(s.__)("Number of Columns","web-stories"),value:a,onChange:e=>w({numOfColumns:e}),min:1,max:4,step:1}),E===t&&n.a.createElement(m.RangeControl,{label:Object(s.__)("Circle Size","web-stories"),value:d,onChange:e=>w({circleSize:e}),min:80,max:200,step:5})),f&&n.a.createElement(m.PanelBody,{title:Object(s.__)("Sorting and Filtering","web-stories")},n.a.createElement(m.SelectControl,{label:Object(s.__)("Order By","web-stories"),options:[{value:"date",label:Object(s.__)("Date","web-stories")},{value:"title",label:Object(s.__)("Title","web-stories")}],value:i||"date",onChange:e=>w({orderby:e})}),n.a.createElement(m.SelectControl,{label:Object(s.__)("Order","web-stories"),options:[{value:"asc",label:Object(s.__)("Ascending","web-stories")},{value:"desc",label:Object(s.__)("Descending","web-stories")}],value:o||"desc",onChange:e=>w({order:e})}),n.a.createElement(N,{authors:c,setAttributes:w}),n.a.createElement(m.RangeControl,{label:Object(s.__)("Number of Stories","web-stories"),value:r,onChange:e=>w({numOfStories:e}),min:1,max:20,step:1})))};var z=()=>n.a.createElement(m.Placeholder,{className:"web-stories-placeholder",instructions:Object(s.__)("Loading Stories…","web-stories")},n.a.createElement(m.Spinner,null)),W=r(19),R=r.n(W),V=r(24),D=r.n(V);D.a.prototype.scrollItem=function(e,t,r){var a;if(void 0===r&&null!==(a=t)&&void 0!==a&&a.target&&(r=t,t=!1),void 0===r)return!1;if(r&&r.preventDefault(),this.opt.slidesToScroll=Math.max(1,this.opt.slidesToScroll),this.opt.slidesToShow=Math.max(1,this.opt.slidesToShow),this.itemWidth===1/0){const e=r.target.parentElement.querySelector(".web-stories-list__carousel"),t=window.getComputedStyle(e.querySelector(".web-stories-list__story"));this.itemWidth=parseFloat(t.width)+(parseFloat(t.marginLeft)+parseFloat(t.marginRight))}const o=e;if(++this.animate_id,!0===t)e*=this.containerWidth,e=Math.round(e/this.itemWidth)*this.itemWidth;else{if("string"==typeof e){const t="prev"===e;if(e=this.opt.slidesToScroll%1||this.opt.slidesToShow%1?this.getCurrentSlide():isNaN(this.slide)?0:this.slide,t?e-=this.opt.slidesToScroll:e+=this.opt.slidesToScroll,this.opt.rewind){const r=this.ele.scrollLeft;e=t&&!r?this.slides.length:!t&&r+this.containerWidth>=Math.floor(this.trackWidth)?0:e}}e=Math.min(e,this.slides.length),this.slide=e,e=this.itemWidth*e}return this.scrollTo(e,this.opt.duration*Math.abs(this.ele.scrollLeft-e),(function(){this.updateControls(),this.emit("animated",{value:o,type:"string"==typeof o?"arrow":t?"dot":"slide"})})),!1};var F=D.a,$=r(14);var H=function StoryCard({title:e,excerpt:t,poster:r,author:a,date:o,isShowingAuthor:i,isShowingDate:l,isShowingTitle:c,isShowingExcerpt:d,imageAlignment:u}){const b=R()("web-stories-list__story",{"image-align-right":"right"===u}),m=c||i||l,p=Object($.__experimentalGetSettings)().formats.date;return n.a.createElement("div",{className:b},n.a.createElement("div",{className:"web-stories-list__story-poster"},r?n.a.createElement("img",{src:r,alt:e}):n.a.createElement("div",{className:"web-stories-list__story-poster-placeholder"},n.a.createElement("span",null,e))),m&&n.a.createElement("div",{className:"story-content-overlay web-stories-list__story-content-overlay"},c&&e&&n.a.createElement(h.RawHTML,{className:"story-content-overlay__title"},e),d&&t&&n.a.createElement(h.RawHTML,{className:"story-content-overlay__excerpt"},t),i&&n.a.createElement("div",{className:"story-content-overlay__author"},Object(s.sprintf)(
/* translators: byline. %s: author name. */
Object(s.__)("By %s","web-stories"),a)),l&&n.a.createElement("time",{dateTime:Object($.format)("c",o),className:"story-content-overlay__date"},Object(s.sprintf)(
/* translators: %s: publish date. */
Object(s.__)("On %s","web-stories"),Object($.dateI18n)(p,o)))))};const{config:{archiveURL:q}}=window.webStoriesBlockSettings;var U=function StoriesPreview(e){const{attributes:{align:t,viewType:r,circleSize:a,imageAlignment:o,fieldState:i,numOfColumns:l},viewAllLabel:c,stories:d}=e,u=Object(h.useRef)(null),b=Object(h.useRef)(null),m=Object(h.useRef)(null),p=R()({"is-style-default":!i.show_sharp_corners,"is-style-squared":i.show_sharp_corners,"is-carousel":E===r||S===r,[`is-view-type-${r}`]:r,[`columns-${l}`]:v===r&&l,[`align${t}`]:t,"has-archive-link":i.show_archive_link},"web-stories-list"),StoriesLoop=()=>d.map((e=>{var t,r,s;return n.a.createElement(H,{key:e.id,url:e.link,title:e.title.rendered,excerpt:e.excerpt.rendered?e.excerpt.rendered:"",date:e.date_gmt,author:e._embedded.author[0].name,poster:null===(t=e._embedded)||void 0===t||null===(r=t["wp:featuredmedia"])||void 0===r||null===(s=r[0])||void 0===s?void 0:s.source_url,imageAlignment:o,isShowingAuthor:i.show_author,isShowingDate:i.show_date,isShowingTitle:i.show_title,isShowingExcerpt:i.show_excerpt,circleSize:a})}));return Object(h.useEffect)((()=>{if(!u.current)return;const e=u.current.querySelector(".web-stories-list__story");if(!e)return;const t=window.getComputedStyle(e),r=parseFloat(t.width)+(parseFloat(t.marginLeft)+parseFloat(t.marginRight)),a=new F(u.current,{slidesToShow:"auto",slidesToScroll:"auto",itemWidth:r,duration:.25,skipTrack:!0,scrollLock:!0,arrows:{prev:m.current,next:b.current}});a.resize();const o=r*d.length;a.trackWidth=o,a.track.style.width=`${o}px`}),[d.length,r,a]),n.a.createElement("div",{className:p,style:{"--ws-circle-size":"circles"===r&&a?`${a}px`:void 0}},n.a.createElement("div",{className:"web-stories-list__inner-wrapper"},E===r||S===r?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"web-stories-list__carousel",ref:u},n.a.createElement("div",{className:"glider-track"},n.a.createElement(StoriesLoop,null))),n.a.createElement("div",{"aria-label":Object(s.__)("Previous","web-stories"),className:"glider-prev",ref:m}),n.a.createElement("div",{"aria-label":Object(s.__)("Next","web-stories"),className:"glider-next",ref:b})):n.a.createElement(StoriesLoop,null)),i.show_archive_link&&q&&n.a.createElement("div",{className:"web-stories-list__archive-link"},n.a.createElement("a",{target:"__blank",href:q},c)))};const{config:{api:{stories:G}}}=window.webStoriesBlockSettings;var Q=function LatestStoriesEdit({attributes:e,setAttributes:t}){const{numOfStories:r,order:a,orderby:o,archiveLinkLabel:i,authors:c}=e,[d,u]=Object(h.useState)([]),[b,w]=Object(h.useState)([]),f=Object(h.useCallback)((async e=>{try{w(!0);const t=await T()({path:Object(L.addQueryArgs)(G,{per_page:20,_embed:"author,wp:featuredmedia",orderby:e.orderby||"modified",order:e.order||"desc",author:e.author||void 0})});Array.isArray(t)&&u(t)}catch(e){u([])}finally{w(!1)}}),[]),g=Object(M.a)(f,1e3);Object(h.useEffect)((()=>{g({order:a||"desc",orderby:o||"date",author:c})}),[c,r,a,o,g]);const _=i||Object(s.__)("View All Stories","web-stories"),v=d.length>r?d.slice(0,r):d;return n.a.createElement(n.a.Fragment,null,n.a.createElement(P,{attributes:e,setAttributes:t}),b&&n.a.createElement(z,null),!b&&Boolean(null==v?void 0:v.length)&&n.a.createElement(U,{attributes:e,stories:v,viewAllLabel:_}),!b&&!(null!=v&&v.length)&&n.a.createElement(m.Placeholder,{icon:n.a.createElement(p.BlockIcon,{icon:n.a.createElement(l.b,null),showColors:!0}),label:Object(s.__)("Latest Stories","web-stories"),className:"wp-block-web-stories-embed",instructions:Object(s.__)("No stories found.","web-stories")},n.a.createElement(m.Button,{href:Object(L.addQueryArgs)("post-new.php",{post_type:"web-story"}),isLink:!0},Object(s.__)("Create New Story","web-stories"))))},X=r(20),K=r(22);const{config:{maxNumOfStories:Y}}=window.webStoriesBlockSettings;var J=({icon:e,label:t,selectedStories:r,setSelectedStories:a})=>{const[o,i]=Object(h.useState)(!1),[l,c]=Object(h.useState)(!1),d=()=>i(!0),u=Object(h.useCallback)((()=>{i(!1),c(!1)}),[]),b=Object(h.useCallback)((()=>{c(!0),d()}),[]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(p.BlockControls,{group:"other"},Boolean(null==r?void 0:r.length)&&(m.ToolbarButton?n.a.createElement(n.a.Fragment,null,n.a.createElement(m.ToolbarButton,{"aria-expanded":o,"aria-haspopup":"true",onClick:d},Object(s.__)("Select","web-stories")),n.a.createElement(m.ToolbarButton,{"aria-expanded":o,"aria-haspopup":"true",onClick:b},Object(s.__)("Rearrange","web-stories"))):n.a.createElement(n.a.Fragment,null,n.a.createElement(m.Button,{className:"components-toolbar__control",title:Object(s.__)("Select","web-stories"),"aria-expanded":o,"aria-haspopup":"true",onClick:d}),n.a.createElement(m.Button,{className:"components-toolbar__control",title:Object(s.__)("Rearrange","web-stories"),"aria-expanded":b,"aria-haspopup":"true",onClick:b})))),0===r.length&&n.a.createElement(m.Placeholder,{icon:n.a.createElement(p.BlockIcon,{icon:e,showColors:!0}),label:t,className:"wp-block-web-stories-embed",instructions:Object(s.__)("Select the web stories you want to display on your site.","web-stories")},n.a.createElement(m.Button,{isPrimary:!0,onClick:d},Object(s.__)("Select Stories","web-stories"))),o&&n.a.createElement(K.a,{closeStoryPicker:u,selectedStories:r,setSelectedStories:a,isSortingStories:l,setIsSortingStories:c,maxNumOfStories:Y}))};var Z=function SelectedStoriesEdit({icon:e,attributes:t,setAttributes:r,isSelected:a}){const{stories:o=[],archiveLinkLabel:i}=t,[l,c]=Object(h.useState)(o),[d,u]=Object(h.useState)([]),[b,m]=Object(h.useState)(!1),p=Object(s.__)("Selected Stories","web-stories"),w=i||Object(s.__)("View All Stories","web-stories");Object(h.useEffect)((()=>{t.stories.toString()!==l.toString()&&r({stories:l})}),[t.stories,r,l]),Object(h.useEffect)((()=>{l.length&&!d.length&&m(!0)}),[l,d,m]);const f=Object(h.useCallback)((e=>{u(e),c(e.map((e=>e.id)))}),[u]);return b?n.a.createElement(X.a,{icon:e,label:p,selectedStoryIds:l,setSelectedStories:f,setIsFetching:m}):n.a.createElement(n.a.Fragment,null,n.a.createElement(P,{attributes:t,setAttributes:r,showFilters:!1}),Boolean(null==d?void 0:d.length)&&n.a.createElement(U,{attributes:t,stories:d,viewAllLabel:w}),n.a.createElement(J,{icon:e,label:p,selectedStories:d,setSelectedStories:f,isEditing:a}))};var ee=function WebStoriesEdit({attributes:e,setAttributes:t,className:r,isSelected:a}){const{blockType:o,viewType:i}=e;return o?o===g||i?n.a.createElement(n.a.Fragment,null,n.a.createElement(j,{blockType:o,viewType:i,setAttributes:t}),o===w&&n.a.createElement(Q,{attributes:e,setAttributes:t}),o===f&&n.a.createElement(Z,{icon:n.a.createElement(l.b,null),attributes:e,setAttributes:t,isSelected:a}),o===g&&n.a.createElement(b.a,{icon:n.a.createElement(l.b,null),attributes:e,setAttributes:t,className:r,isSelected:a})):n.a.createElement(C,{icon:n.a.createElement(l.b,null),setAttributes:t,instructions:Object(s.__)("Select a layout style","web-stories"),selectionOptions:O,selectionType:"viewType"}):n.a.createElement(C,{icon:n.a.createElement(l.b,null),setAttributes:t,instructions:Object(s.__)("Embed a collection of your latest stories, select your own or enter an URL.","web-stories"),selectionOptions:_,selectionType:"blockType"})};var te={name:"web-stories/embed",title:"Web Stories",description:"Embed Web Stories.",category:"embed",keywords:["embed","web stories","story","stories"],textdomain:"web-stories",attributes:{blockType:{type:"string"},url:{type:"string"},title:{type:"string"},poster:{type:"string"},width:{type:"number",default:360},height:{type:"number",default:600},align:{type:"string",default:"none"},stories:{type:"array",default:[]},viewType:{type:"string",default:""},numOfStories:{type:"number",default:5},numOfColumns:{type:"number",default:2},circleSize:{type:"number",default:96},imageAlignment:{type:"string",default:"left"},order:{type:"string",default:""},orderby:{type:"string",default:""},archiveLinkLabel:{type:"string",default:""},authors:{type:"array",default:[]},fieldState:{type:"object",default:{}}},supports:{align:["wide","full","left","right","center"]}};const{attributes:re}=te;var ae={from:[{type:"shortcode",tag:"web_stories_embed",attributes:{...re,align:{type:"string",shortcode:({named:{align:e}})=>e},height:{type:"number",shortcode:({named:{height:e}})=>e},poster:{type:"string",shortcode:({named:{poster:e}})=>e},title:{type:"string",shortcode:({named:{title:e}})=>e},url:{type:"string",shortcode:({named:{url:e}})=>e},width:{type:"number",shortcode:({named:{width:e}})=>e},blockType:{type:"string",default:g}},priority:9},{type:"shortcode",tag:"web_stories",attributes:{...re,blockType:{type:"string",default:w},align:{type:"string",shortcode:({named:{align:e}})=>e},archiveLinkLabel:{type:"string",shortcode:({named:{archive_link_label:e}})=>e},viewType:{type:"string",shortcode:({named:{view:e}})=>e},numOfStories:{type:"number",shortcode:({named:{number:e}})=>e},numOfColumns:{type:"number",shortcode:({named:{columns:e}})=>e},circleSize:{type:"number",shortcode:({named:{circle_size:e}})=>e},fieldState:{type:"object",shortcode:({named:{title:e,excerpt:t,author:r,date:a,archive_link:o,image_align:i}})=>({show_archive_link:"true"===o,show_author:"true"===r,show_date:"true"===a,show_excerpt:"true"===t,show_image_align:"true"===i,show_title:"true"===e})}}},{type:"block",blocks:["core/legacy-widget"],isMatch:({idBase:e,instance:t})=>!(null==t||!t.raw)&&"web_stories_widget"===e,transform:({instance:e})=>{const{raw:{archive_link_label:t,circle_size:r,image_alignment:a,number_of_columns:i,number_of_stories:n,view_type:s,show_title:l,show_author:c,show_date:d,show_excerpt:u,show_archive_link:b,sharp_corners:m,show_image_alignment:p,title:h,orderby:w="",order:f=""}}=e,g=Object(o.createBlock)("web-stories/embed",{blockType:"latest-stories",viewType:s,fieldState:{show_title:l,show_author:c,show_date:d,show_excerpt:u,show_archive_link:b,show_sharp_corners:m,show_image_alignment:p},archiveLinkLabel:t,circleSize:r,numOfColumns:i,imageAlignment:a,numOfStories:n,orderby:w.replace("post_",""),order:f.toLowerCase()});return h?[Object(o.createBlock)("core/heading",{content:h}),g]:g}}]};const{name:oe,category:ie,keywords:ne,attributes:se,supports:le}=te,ce={title:Object(s.__)("Web Stories","web-stories"),description:Object(s.__)("Embed stories using various layout options.","web-stories"),category:ie,icon:n.a.createElement(l.b,null),keywords:ne,attributes:se,example:{attributes:{blockType:w,viewType:v,numberOfColumns:2}},supports:le,deprecated:u,edit:ee,save:c,transforms:ae};Object(o.registerBlockType)(oe,ce),Object(a.a)("Embed Block",!1)}]);