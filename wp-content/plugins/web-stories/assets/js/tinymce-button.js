!function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__webpack_require__.d(r,n,function(t){return e[t]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=9)}([function(e,t){e.exports=window.React},function(e,t){e.exports=window.wp.data},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wp.components},function(e,t,r){e.exports=r(7)()},function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.compose},function(e,t,r){"use strict";var n=r(8);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,o,c){if(c!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return r.PropTypes=r,r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"setSettings",(function(){return _})),r.d(n,"toggleModal",(function(){return b})),r.d(n,"setEditor",(function(){return d})),r.d(n,"setCurrentView",(function(){return g})),r.d(n,"setViewSettings",(function(){return w}));var i={};r.r(i),r.d(i,"getSettings",(function(){return M})),r.d(i,"getModal",(function(){return h})),r.d(i,"getEditor",(function(){return y})),r.d(i,"getCurrentView",(function(){return N})),r.d(i,"getCurrentViewSettings",(function(){return C})),r.d(i,"getState",(function(){return I}));var o=r(0),c=r.n(o),a=r(5),l=r(1),s=r(2),u=name="web-stories-mce";function _(e){return{type:"SET_SETTINGS",settings:e}}function b(e){return{type:"TOGGLE_MODAL",modalOpen:e}}function d(e){return{type:"SET_EDITOR",editor:e}}function g(e){return{type:"SET_CURRENT_VIEW",currentView:e}}function w(e,t){return{type:"SET_VIEW_SETTINGS",view:e,settings:t}}const{webStoriesData:f}=window,p=({fieldObj:e,field:t,hidden:r=!1})=>{const n=Object(l.select)(u).getCurrentViewSettings();let i=n;switch(typeof e){case"object":if(!r){const{show:r}=e;i={...n,[t]:{...e,show:!r}}}break;default:i={...n,[t]:e}}Object(l.dispatch)(u).setViewSettings(Object(l.select)(u).getCurrentView(),i)},j=()=>{let e="[web_stories";const t=Object(l.select)(u).getEditor(),r=Object(l.select)(u).getCurrentViewSettings();return t&&Object.keys(r).forEach((t=>{const n=r[t],i="object"==typeof n?n.show.toString():n.toString();e+=` ${t.toString()}="${i}"`})),e+=" /]",e},m={settings:{},modalOpen:!1,editor:!1,currentView:"circles"};m.settings=(()=>{const e=[],{views:t,fields:r}=f;return t.forEach((t=>{const{value:n}=t,{title:i,author:o,date:c,excerpt:a,archive_link:l,sharp_corners:s}=r[n];e[n]={title:i,excerpt:a,author:o,date:c,archive_link:l,archive_link_label:"",circle_size:150,sharp_corners:s,image_alignment:"left",number_of_columns:1,number_of_stories:5,order:"DESC",orderby:"post_title",view:n}})),e})();var O=m;var E=function(e=O,t){switch(t.type){case"SET_SETTINGS":return{...e,settings:t.settings};case"TOGGLE_MODAL":return{...e,modalOpen:t.modalOpen};case"SET_EDITOR":return{...e,editor:t.editor};case"SET_CURRENT_VIEW":return{...e,currentView:t.currentView};case"SET_VIEW_SETTINGS":return{...e,settings:{...e.settings,[t.view]:t.settings}};default:return e}};function M(e){return e.settings}function h(e){return e.modalOpen}function y(e){return e.editor}function N(e){return e.currentView}function C(e){const t=Object(l.select)(u).getCurrentView();return e.settings[t]}function I(e){return e}var S=Object(l.registerStore)(u,{actions:n,reducer:E,selectors:i}),T=r(6),v=(r(4),r(3));var Toggle=e=>{const{fieldObj:t={},field:r}=e,{show:n,hidden:i,label:o}=t;return i?null:c.a.createElement(v.ToggleControl,{label:o,checked:n,onChange:()=>{p({fieldObj:t,field:r,hidden:i})}})};var Modal=e=>{const{modalOpen:t,settings:r,prepareShortCode:n}=e,{author:i,date:o,title:a,number_of_stories:_,order:b,orderby:d,view:g,excerpt:w,image_alignment:j,archive_link:m,circle_size:O,number_of_columns:E,sharp_corners:M,archive_link_label:h}=r,{views:y={},fields:N}=f,C=e=>(null==N?void 0:N[g][e].show)&&!(null!=N&&N[g][e].hidden);return t?c.a.createElement(v.Modal,{onRequestClose:()=>{Object(l.dispatch)(u).toggleModal(!1)},closeButtonLabel:Object(s.__)("Close","web-stories"),title:Object(s.__)("Web Stories","web-stories"),className:"component_web_stories_mce_model",shouldCloseOnClickOutside:!1},c.a.createElement(v.SelectControl,{label:Object(s.__)("Select Layout","web-stories"),value:g,options:y,onChange:e=>{Object(l.dispatch)(u).setCurrentView(e)}}),c.a.createElement(v.RangeControl,{label:Object(s.__)("Number of Stories","web-stories"),value:_,min:1,max:20,onChange:e=>{p({fieldObj:Number(e),field:"number_of_stories"})}}),c.a.createElement(v.SelectControl,{label:Object(s.__)("Order By","web-stories"),value:d,options:[{value:"post_date",label:Object(s.__)("Date","web-stories")},{value:"post_title",label:Object(s.__)("Title","web-stories")}],onChange:e=>{p({fieldObj:e,field:"orderby"})}}),c.a.createElement(v.SelectControl,{label:Object(s.__)("Order","web-stories"),value:b,options:[{value:"ASC",label:Object(s.__)("Ascending","web-stories")},{value:"DESC",label:Object(s.__)("Descending","web-stories")}],onChange:e=>{p({fieldObj:e,field:"order"})}}),c.a.createElement(Toggle,{field:"title",fieldObj:a}),c.a.createElement(Toggle,{field:"excerpt",fieldObj:w}),c.a.createElement(Toggle,{field:"author",fieldObj:i}),c.a.createElement(Toggle,{field:"date",fieldObj:o}),C("image_alignment")&&c.a.createElement("div",{style:{margin:"0 0 10px 0"}},c.a.createElement(v.RadioControl,{label:Object(s.__)("Image Alignment","web-stories"),selected:j,options:[{value:"left",label:Object(s.__)("Left","web-stories")},{value:"right",label:Object(s.__)("Right","web-stories")}],onChange:e=>{p({fieldObj:e,field:"image_alignment"})}})),c.a.createElement(Toggle,{field:"sharp_corners",fieldObj:M}),c.a.createElement(Toggle,{field:"archive_link",fieldObj:m}),(null==m?void 0:m.show)&&c.a.createElement(v.TextControl,{label:Object(s.__)("Archive Link Label","web-stories"),value:h,onChange:e=>{p({fieldObj:e,field:"archive_link_label"})}}),(null==O?void 0:O.show)&&c.a.createElement(v.RangeControl,{label:Object(s.__)("Circle Size","web-stories"),value:O,min:80,max:200,step:5,onChange:e=>p({fieldObj:Number(e),field:"circle_size"})}),C("number_of_columns")&&c.a.createElement(v.RangeControl,{label:Object(s.__)("Number of Columns","web-stories"),value:E,min:1,max:4,onChange:e=>p({fieldObj:Number(e),field:"number_of_columns"})}),c.a.createElement("div",{style:{padding:"20px 0"},className:"alignright"},c.a.createElement(v.Button,{isPrimary:!0,onClick:()=>{const e=Object(l.select)(u).getEditor();if(e){const t=n();e.insertContent(t)}Object(l.dispatch)(u).toggleModal(!1)}},Object(s.__)("Insert","web-stories")),c.a.createElement(v.Button,{onClick:()=>Object(l.dispatch)(u).toggleModal(!1)},Object(s.__)("Cancel","web-stories")))):null};var D=Object(T.compose)([Object(l.withSelect)((e=>({modalOpen:e(u).getModal(),settings:e(u).getCurrentViewSettings(),prepareShortCode:j})))])(Modal);const{_:x}=window;x.hasOwnProperty("pluck")||(x.pluck=x.map);S.subscribe((()=>(()=>{const e=document.getElementById("web-stories-tinymce");e&&Object(a.render)(c.a.createElement(D,null),e)})())),tinymce.PluginManager.add("web_stories",(function(e){e.addButton("web_stories",{text:Object(s.__)("Web Stories","web-stories"),classes:"web-stories",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjA4IiBoZWlnaHQ9IjIwOCIgdmlld0JveD0iMCAwIDIwOCAyMDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iMTAwIiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNMTM1LjIgNjIuNDAwNUMxNDAuOTQ0IDYyLjQwMDUgMTQ1LjYgNjcuMDU2NyAxNDUuNiA3Mi44MDA1VjEzNS4yQzE0NS42IDE0MC45NDQgMTQwLjk0NCAxNDUuNiAxMzUuMiAxNDUuNlY2Mi40MDA1WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTU3LjIgNjIuNDAwNUM1Ny4yIDU2LjY1NjcgNjEuODU2MiA1Mi4wMDA1IDY3LjYgNTIuMDAwNUgxMTQuNEMxMjAuMTQ0IDUyLjAwMDUgMTI0LjggNTYuNjU2NyAxMjQuOCA2Mi40MDA1VjE0NS42QzEyNC44IDE1MS4zNDQgMTIwLjE0NCAxNTYgMTE0LjQgMTU2SDY3LjZDNjEuODU2MiAxNTYgNTcuMiAxNTEuMzQ0IDU3LjIgMTQ1LjZWNjIuNDAwNVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNTYgNzIuODAwNUMxNjAuMzA4IDcyLjgwMDUgMTYzLjggNzYuMjkyNyAxNjMuOCA4MC42MDA1VjEyNy40QzE2My44IDEzMS43MDggMTYwLjMwOCAxMzUuMiAxNTYgMTM1LjJWNzIuODAwNVoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPg==",onclick:function(){Object(l.dispatch)(u).setEditor(e),Object(l.dispatch)(u).toggleModal(!0)}})}))}]);