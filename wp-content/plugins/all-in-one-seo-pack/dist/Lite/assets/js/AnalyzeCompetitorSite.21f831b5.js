import{a as u,m as i,e as h,b as d}from"./index.f16c040b.js";import"./WpTable.078239fd.js";import{n}from"./vueComponentNormalizer.58b0a173.js";import{m as _}from"./constants.71b051da.js";import{S as a}from"./SeoSiteScore.48a1cf92.js";import{C as y,a as f}from"./Score.13f0dff9.js";import{p as g}from"./popup.25df8419.js";import{C as v}from"./Blur.945b1b3e.js";import{C as p}from"./Card.1a6f5bab.js";import{C}from"./SeoSiteAnalysisResults.f112fc77.js";import{C as S}from"./Index.c6dbed41.js";import{S as z}from"./Refresh.c8d03328.js";import{f as $}from"./index.c9bc1c73.js";import"./isArrayLikeObject.5268a676.js";import"./default-i18n.0e73c33c.js";import"./attachments.0f69322e.js";import"./cleanForSlug.41bbbaec.js";import"./params.bea1a08d.js";import"./Tooltip.a36a3967.js";import"./_commonjsHelpers.10c44588.js";import"./Slide.01023b2f.js";import"./GoogleSearchPreview.3cec5179.js";import"./Information.6f7632ab.js";import"./Gear.b5f13261.js";import"./client.b661b356.js";import"./translations.3bc9d58c.js";import"./portal-vue.esm.272b3133.js";var A=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("core-card",{attrs:{slug:"analyzeNewCompetitor","hide-header":"","no-slide":"",toggles:!1}},[e(t.internalOptions.internal.siteAnalysis.connectToken?"div":"core-blur",{tag:"component"},[t._t("default")],2),t.internalOptions.internal.siteAnalysis.connectToken?t._e():e("div",{staticClass:"aioseo-seo-site-score-cta"},[e("a",{attrs:{href:"#"},on:{click:function(r){return t.openPopup(t.$aioseo.urls.connect)}}},[t._v(t._s(t.connectWithAioseo))]),t._v(" "+t._s(t.strings.toAnalyzeCompetitorSite)+" ")])],1),t.internalOptions.internal.siteAnalysis.connectToken?[t._t("competitor-results")]:t._e()],2)},R=[];const k={components:{CoreBlur:v,CoreCard:p},mixins:[a],computed:{...u(["internalOptions"])},methods:{...i(["saveConnectToken"]),openPopup(t){g(t,this.connectWithAioseo,600,630,!0,["token"],this.completedCallback,()=>{})},completedCallback(t){return this.saveConnectToken(t.token)}}},l={};var b=n(k,A,R,!1,T,null,null,null);function T(t){for(let s in l)this[s]=l[s]}const E=function(){return b.exports}();var x=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"aioseo-site-score-competitor"},[e("div",{staticClass:"aioseo-seo-site-score-score"},[e("core-site-score",{attrs:{loading:t.isAnalyzing||t.loading,score:t.score,description:t.description}})],1),e("div",{staticClass:"aioseo-seo-site-score-recommendations"},[e("div",{staticClass:"critical"},[e("span",{staticClass:"round red"},[t._v(t._s(t.summary.critical||0))]),t._v(" "+t._s(t.strings.criticalIssues)+" ")]),e("div",{staticClass:"recommended"},[e("span",{staticClass:"round blue"},[t._v(t._s(t.summary.recommended||0))]),t._v(" "+t._s(t.strings.recommendedImprovements)+" ")]),e("div",{staticClass:"good"},[e("span",{staticClass:"round green"},[t._v(t._s(t.summary.good||0))]),t._v(" "+t._s(t.strings.goodResults)+" ")])]),e("base-button",{staticClass:"refresh-results",attrs:{type:"gray",size:"small",loading:t.isAnalyzing},on:{click:t.refresh}},[e("svg-refresh"),t._v(" "+t._s(t.strings.refreshResults)+" ")],1),t.mobileSnapshot?e("div",{staticClass:"mobile-snapshot"},[e("div",[t._v(t._s(t.strings.mobileSnapshot))]),e("img",{attrs:{alt:"Mobile Snapshot",src:t.mobileSnapshot}})]):t._e()],1)},U=[];const O={components:{CoreSiteScore:S,SvgRefresh:z},mixins:[a],props:{score:Number,loading:Boolean,site:{type:String,required:!0},summary:{type:Object,default(){return{}}},mobileSnapshot:String},data(){return{isAnalyzing:!1,strings:{criticalIssues:this.$t.__("Important Issues",this.$td),warnings:this.$t.__("Warnings",this.$td),recommendedImprovements:this.$t.__("Recommended Improvements",this.$td),goodResults:this.$t.__("Good Results",this.$td),completeSiteAuditChecklist:this.$t.__("Complete Site Audit Checklist",this.$td),refreshResults:this.$t.__("Refresh Results",this.$td),mobileSnapshot:this.$t.__("Mobile Snapshot",this.$td)}}},methods:{...i(["runSiteAnalyzer","deleteCompetitorSite"]),refresh(){this.isAnalyzing=!0,this.runSiteAnalyzer({url:this.site,refresh:!0}).then(()=>this.isAnalyzing=!1)}}},c={};var I=n(O,x,U,!1,w,null,null,null);function w(t){for(let s in c)this[s]=c[s]}const L=function(){return I.exports}();var M=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"aioseo-analyze-competitor-site"},[e("core-analyze-competitor-site-header",{scopedSlots:t._u([{key:"competitor-results",fn:function(){return t._l(t.competitorResults,function(r,o){return e("core-card",{key:o,attrs:{id:"aioseo-competitor-results"+t.hashCode(o),slug:"analyzeCompetitorSite"+o,"save-toggle-status":!1},scopedSlots:t._u([{key:"header",fn:function(){return[e("core-analyze-score",{attrs:{score:t.parseResults(r).score}}),e("span",[t._v(t._s(o))]),e("svg-trash",{nativeOn:{click:function(W){return t.startDeleteSite(o)}}})]},proxy:!0}],null,!0)},[e("div",{staticClass:"competitor-results-main"},[e("core-site-score-competitor",{attrs:{site:o,score:t.parseResults(r).score,loading:t.analyzing,summary:t.getSummary(t.parseResults(r).results),"mobile-snapshot":t.parseResults(r).results.advanced.mobileSnapshot}}),e("div",{staticClass:"competitor-results-body"},[e("core-seo-site-analysis-results",{attrs:{section:"all-items","all-results":t.parseResults(r).results,"show-google-preview":""}})],1)],1)])})},proxy:!0}])},[e("core-analyze",{attrs:{header:t.strings.enterCompetitorUrl,description:t.strings.performInDepthAnalysis,inputError:t.inputError,isAnalyzing:t.isAnalyzing,analyzeTime:t.analyzeTime,placeholder:"https://competitorwebsite.com"},on:{startAnalyzing:t.startAnalyzing},scopedSlots:t._u([{key:"errors",fn:function(){return[t.inputError?e("div",{staticClass:"aioseo-description aioseo-error"},[t._v(" "+t._s(t.strings.pleaseEnterValidUrl)+" ")]):t._e(),t.analyzer==="competitor-site"&&t.analyzeError?e("div",{staticClass:"analyze-errors aioseo-description aioseo-error",domProps:{innerHTML:t._s(t.analyzeError)}}):t._e()]},proxy:!0}])})],1)],1)},j=[];const P={components:{CoreAnalyze:y,CoreAnalyzeScore:f,CoreAnalyzeCompetitorSiteHeader:E,CoreCard:p,CoreSeoSiteAnalysisResults:C,CoreSiteScoreCompetitor:L,SvgTrash:$},mixins:[a],data(){return{competitorUrl:null,isAnalyzing:!1,inputError:!1,competitorResults:{},analyzeTime:8,strings:{enterCompetitorUrl:this.$t.__("Enter Competitor URL",this.$td),performInDepthAnalysis:this.$t.__("Perform in-depth SEO Analysis of your competitor's website.",this.$td),analyze:this.$t.__("Analyze",this.$td),pleaseEnterValidUrl:this.$t.__("Please enter a valid URL.",this.$td)}}},watch:{analyzeError(t){t&&(this.isAnalyzing=!1)}},computed:{...u(["options","analyzer","analyzing","analyzeError"]),...h(["getCompetitorSiteAnalysisResults","goodCount","recommendedCount","criticalCount"]),getError(){switch(this.analyzeError){case"invalid-url":return this.$t.__("The URL provided is invalid.",this.$td);case"missing-content":return this.$t.sprintf("%1$s %2$s",this.$t.__("We were unable to parse the content for this site.",this.$td),this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"seoAnalyzerIssues",!0));case"invalid-token":return this.$t.sprintf(this.$t.__("Your site is not connected. Please connect to %1$s, then try again.",this.$td),"AIOSEO")}return this.analyzeError}},methods:{...i(["runSiteAnalyzer","deleteCompetitorSite","saveConnectToken"]),...d(["toggleCard","closeCard"]),parseResults(t){return JSON.parse(t)},getSummary(t){return{recommended:this.recommendedCount(t),critical:this.criticalCount(t),good:this.goodCount(t)}},startAnalyzing(t){if(this.inputError=!1,this.competitorUrl=t.replace("http://","https://"),this.competitorUrl.startsWith("https://")||(this.competitorUrl="https://"+this.competitorUrl),!_(this.competitorUrl)){this.inputError=!0;return}this.$store.commit("analyzing",!0),this.$store.commit("analyzeError",!1),this.runSiteAnalyzer({url:this.competitorUrl}),this.isAnalyzing=!0,setTimeout(this.checkStatus,this.analyzeTime*1e3),this.closeAllCards()},checkStatus(){if(this.isAnalyzing=!1,this.analyzing){this.$nextTick(()=>{this.isAnalyzing=!0,2>this.analyzeTime&&(this.analyzeTime=8),this.analyzeTime=this.analyzeTime/2,setTimeout(this.checkStatus,this.analyzeTime*1e3)});return}this.competitorUrl=null,this.competitorResults=this.getCompetitorSiteAnalysisResults,this.toggleFirstCard(),this.$nextTick(()=>{const t=Object.keys(this.competitorResults),s=document.querySelector(".aioseo-header"),e=s.offsetHeight+s.offsetTop+30;this.$scrollTo("#aioseo-competitor-results"+this.hashCode(t[0]),{offset:-e})})},startDeleteSite(t){this.closeAllCards(),this.$delete(this.competitorResults,t),this.deleteCompetitorSite(t).then(()=>{this.competitorResults=this.getCompetitorSiteAnalysisResults})},closeAllCards(){Object.keys(this.competitorResults).forEach(s=>{this.closeCard("analyzeCompetitorSite"+s)})},toggleFirstCard(){const t=Object.keys(this.competitorResults);this.toggleCard("analyzeCompetitorSite"+t[0])},hashCode(t){if(!t)return;let s=0,e,r;for(e=0;e<t.length;e++)r=t.charCodeAt(e),s=(s<<5)-s+r,s|=0;return s}},mounted(){this.$store.commit("analyzeError",!1),this.competitorResults=this.getCompetitorSiteAnalysisResults,this.toggleFirstCard()}},m={};var F=n(P,M,j,!1,D,null,null,null);function D(t){for(let s in m)this[s]=m[s]}const _t=function(){return F.exports}();export{_t as default};
